var R=Object.defineProperty;var A=(a,o,n)=>o in a?R(a,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[o]=n;var d=(a,o,n)=>(A(a,typeof o!="symbol"?o+"":o,n),n);import{d as C,D as E,E as M,e as k,o as L,x as q,y as F,f as v,_ as z,r as x,j as G,b2 as f,q as P}from"./index-Dk52mj26.js";import{i as H}from"./initGUI-CcmszmDW.js";import{P as O}from"./P5-33W7Gzbn.js";import"./dat.gui.module-DcMWPYuf.js";const S=a=>(q("data-v-a82a1169"),a=a(),F(),a),W={class:"loading"},$=S(()=>v("div",{class:"mask"},null,-1)),J=S(()=>v("div",{class:"loader"},[v("div",{class:"ring"})],-1)),K=[$,J],Q=C({__name:"Loading",props:{isLoading:{type:Boolean,default:!1},type:{default:0}},setup(a){return(o,n)=>E((L(),k("div",W,K,512)),[[M,o.isLoading]])}}),T=z(Q,[["__scopeId","data-v-a82a1169"]]),y="/nova/assets/test-rkdeV249.jpg",X=C({__name:"PixelPicture",setup(a){const{min:o}=Math,n=x(!1);let t,g=y,p,h;const r={sampleNum:20,isCircle:!1,importImg(){var s;(s=m.value)==null||s.click()},downloadImg(){t.saveCanvas()}},u=[],m=x();function V(){if(m.value){const s=m.value.files[0];g=URL.createObjectURL(s),w(g)}}const I=x();G(()=>{const{gui:s}=H(I.value);s.add(r,"sampleNum",10,100,1).name("sampleNum").onFinishChange(e=>{w(g)}),s.add(r,"isCircle").name("ShowCircle"),s.add(r,"importImg").name("LoadLocalImg").listen(),s.add(r,"downloadImg").name("DownLoad").listen()});class N{constructor(e,i,l){d(this,"pos");d(this,"tarPos");d(this,"vel",new f.Vector(0,0));d(this,"color");d(this,"size");this.tarPos=e,this.pos=new f.Vector(t.random(0,p),t.random(0,h)),this.color=i,this.size=l}show(){t.noStroke(),t.fill(this.color),r.isCircle?t.circle(this.pos.x,this.pos.y,this.size):t.rect(this.pos.x,this.pos.y,this.size,this.size)}update(){const e=f.Vector.dist(this.pos,this.tarPos),i=f.Vector.sub(this.tarPos,this.pos),l=t.map(e,0,50,.08,.3,!0);i.mult(l),this.vel.set(i),this.pos.add(this.vel)}}function b(s,e){let i=600,l=600;const c=s/e;c>1?l=i/c:i=l*c,p=i,h=l,t.createCanvas(p,h)}function w(s){n.value=!0,t.loadImage(s,e=>{b(e.width,e.height);const i=o(e.width,e.height)/r.sampleNum,l=o(p,h)/r.sampleNum;u.length=0,e.loadPixels();for(let c=0;c<e.height;c+=i)for(let _=0;_<e.width;_+=i){const B=e.get(_,c),U=_/e.width*p,D=c/e.height*h;u.push(new N(new f.Vector(U,D),B,l))}n.value=!1})}function j(s){t=s,t.setup=function(){w(y)},t.draw=function(){t.background(51);for(let e=u.length-1;e>=0;e--)u[e].update(),u[e].show()}}return(s,e)=>(L(),k("div",{ref_key:"con",ref:I,class:"viewCon"},[v("input",{ref_key:"file",ref:m,type:"file",accept:"image/png, image/jpeg, image/jpg",style:{display:"none"},onChange:V},null,544),P(O,{sketch:j}),P(T,{"is-loading":n.value},null,8,["is-loading"])],512))}}),oe=z(X,[["__scopeId","data-v-b50bff85"]]);export{oe as default};
