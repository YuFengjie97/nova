import{d as re,r as S,j as le,V as de,O as he,L as ce,J as pe,S as ue,I as we,P as me,W as fe,K as ge,aq as be,aB as ve,C as Ce,e as Me,f as j,M as ye,ah as xe,aC as Pe,R as Se,aD as He,U as Le,a0 as Re,aE as Be,o as Ee}from"./index-CqfaNC88.js";import{R as Ge,E as _e}from"./RenderPass-t97LsirO.js";import{U as ke}from"./UnrealBloomPass-XoO1lnKb.js";import{S as ze}from"./stats.module--VATS4Kh.js";import{i as Ae}from"./initGUI-oTOkqKW2.js";import"./dat.gui.module-DYGKXP-V.js";const r=20,w=20,De=re({__name:"SolarSystem",setup(Ve){const{random:T,PI:D}=Math,H=S(),L=S();let g=window.innerWidth,b=window.innerHeight,M,C,d,p,m,v,u,R,h;le(()=>{q(),$(),O(),X(),K(),ee(),Y(),Q(),U()});let o,B,E,y,G,_,k,z,A,V,W;const c=10*r,x=[],t={vBase:.001,showHelper:!1,lightVisible:!0,lightColor:15158332,intensity:5,distance:2e3,decay:.5,exposure:1,bloomStrength:1.5,bloomThreshold:0,bloomRadius:0},F=S();function q(){const{gui:n}=Ae(F.value);n.add(t,"showHelper").onChange(e=>{x.forEach(a=>a.visible=e)}),n.add(t,"vBase",0,.03,.001);const s=n.addFolder("light");s.open(),s.add(t,"lightVisible").onChange(e=>{h.visible=e}),s.addColor(t,"lightColor").onChange(e=>{h.color.setHex(e)}),s.add(t,"intensity",0,7,.1).onChange(e=>{h.intensity=e}),s.add(t,"distance",0,4e3,1).onChange(e=>{h.distance=e}),s.add(t,"decay",0,10,.1).onChange(e=>{h.decay=e});const i=n.addFolder("glow");i.open(),i.add(t,"exposure",0,10,.1).onChange(e=>{m.toneMappingExposure=e**4}),i.add(t,"bloomStrength",0,10,.1).onChange(e=>{u.threshold=e}),i.add(t,"bloomThreshold",0,10,.1).onChange(e=>{u.strength=e}),i.add(t,"bloomRadius",0,10,.1).onChange(e=>{u.radius=e})}class l{constructor(s=!1,i,e,a,P,f){this.t=0,this.isGlow=s,this.targetPlanet=f,this.group=new ye;const te=new xe(i,128,128),ne=new Pe({color:e});if(this.planetMesh=new Se(te,ne),this.planetMesh.layers.enable(0),this.group.add(this.planetMesh),this.t=T(),this.vRatio=P,f){this.oribitR=a;const{x:se,y:oe}=f==null?void 0:f.planetMesh.position;f.group.add(this.group),this.oribitCurve=new He(se,oe,a,a,0,2*Math.PI,!0,0);const ie=new Le().setFromPoints(this.oribitCurve.getPoints(300)),ae=new Re({color:e});this.oribitMesh=new Be(ie,ae),this.oribitMesh.layers.enable(0),this.oribitMesh.rotation.x=D/2,this.group.add(this.oribitMesh)}}planetMoveByCurve(){if(this.t>=1&&(this.t=0),this.targetPlanet){const{x:s,y:i,z:e}=this.targetPlanet.planetMesh.position;this.group.position.set(s,i,e),this.t+=this.vRatio*t.vBase;const{x:a,y:P}=this.oribitCurve.getPoint(this.t);this.planetMesh.position.set(a,0,P)}}}function O(){R=new Ge(d,p),u=new ke(new de(window.innerWidth,window.innerHeight),1.5,.4,.85),u.threshold=t.bloomThreshold,u.strength=t.bloomStrength,u.radius=t.bloomRadius,v=new _e(m),v.addPass(R),v.addPass(u)}function J(){p.layers.set(1),v.render(),p.layers.set(0)}function K(){o=new l(!0,c,15158332,0,0),d.add(o.group),B=new l(!1,.5*r,1752220,c+2*w,4.1,o),E=new l(!1,r,15965202,c+6*w,1.6,o),y=new l(!1,r,3447003,c+12*w,1,o),_=new l(!1,.8*r,12597547,c+16*w,.5,o),k=new l(!1,.3*r,2600544,c+20*w,.08,o),z=new l(!1,5*r,9807270,c+30*w,.03,o),A=new l(!1,4*r,9323693,c+50*w,.01,o),V=new l(!1,3*r,3447003,c+60*w,.006,o),G=new l(!1,.2*r,15528177,1.4*r,2,y),W=[B,E,y,_,k,z,A,V,G]}function N(){W.forEach(n=>{n.planetMoveByCurve()})}function Q(){M=ze(),L.value.append(M.dom)}function X(){C=new he(p,m.domElement),C.target=new ce(0,0,0),C.object.position.set(300,400,800),C.update()}function Y(){const n=new pe(1600);n.visible=t.showHelper,x.push(n),d.add(n)}function Z(){g=window.innerWidth,b=window.innerHeight,p.aspect=g/b,p.updateProjectionMatrix(),m.setSize(g,b)}function $(){d=new ue,d.background=new we(0),p=new me(75,g/b,1,4e4),m=new fe({canvas:H.value,antialias:!0}),m.setSize(g,b),window.addEventListener("resize",Z)}function ee(){const n=new ge(4210752);d.add(n),h=new be(15158332,5,2e3,.5);const{x:s,y:i,z:e}=o.planetMesh.position;h.position.set(s,i,e),d.add(h);const a=new ve(h,1600);a.visible=t.showHelper,x.push(a),d.add(a)}let I=0;function U(){M.update(),N(),J(),m.render(d,p),v.render(),I=requestAnimationFrame(U)}return Ce(()=>{cancelAnimationFrame(I)}),(n,s)=>(Ee(),Me("div",{ref_key:"con",ref:F,class:""},[j("div",{ref_key:"canvasCon",ref:L,class:"canvasCon"},[j("canvas",{ref_key:"canvasDom",ref:H,class:"canvas"},null,512)],512)],512))}});export{De as default};
