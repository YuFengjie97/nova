import{a as k}from"./p5.min-WfQBoNak.js";import{P as z}from"./P5Con-DJd9bvJN.js";import{A as C}from"./AudioController-DQ5RlVS_.js";import{i as B,n as M}from"./p5bezier-DEnatsBd.js";import{m as D}from"./audio-sugarCrush-1d8eZUIK.js";import{b as S}from"./math-Cm0Zo__g.js";import{d as v,r as E,e as V,q as f,y as L,o as O}from"./index-CqfaNC88.js";const R={class:"w-full h-full"},q=250,u=100,F=.9,H="#5f27cd",U=v({__name:"MusicCircle",setup(N){const{PI:h,floor:m,min:p}=Math;let n,a;const l=E(64),r=l.value/2,d=[],e=[];let c;class g{constructor(o,s,i){this.r=2,this.audioIndex=0,this.h=0,this.count=0,this.$p=o,this.angle=s,this.basePos=k.Vector.fromAngle(s,p(n,a)/2*F),this.pos=this.basePos.copy(),this.audioIndex=i}draw(){const{$p:o,pos:{x:s,y:i},h:y,count:I}=this;o.noStroke(),o.fill((y+I)%255,255,127),o.circle(s,i,this.r*2)}update(o){this.pos=this.basePos.copy().mult(o),this.h=m(o*255),this.count++}}function x(t){c=t}function _(t){const o=S(r);for(let s=0;s<r;s++)d.push(new g(t,h*2/r*s,o()??0))}function w(){const t=c.getAudioData();e.length=0,d.forEach(o=>{const s=t[o.audioIndex],i=s<u?u:s;o.update(i/q),o.draw(),s>u&&e.push([o.pos.x,o.pos.y])})}function P(t){t.noFill(),t.stroke(H),t.strokeWeight(2),e.length>=10&&M(e,"CLOSE")}function A(t,o){n=t.width,a=t.height,t.colorMode(t.HSB),B(o),_(t)}function b(t){t.translate(n/2,a/2),t.background("rgba(0, 0, 0, 0.07)"),c&&(w(),P(t))}return(t,o)=>(O(),V("div",R,[f(C,{class:"absolute top-0 left-0 z-100","audio-src":L(D),"fft-size":l.value,onInitAudioAnalyser:x},null,8,["audio-src","fft-size"]),f(z,{setup:A,draw:b})]))}});export{U as default};
