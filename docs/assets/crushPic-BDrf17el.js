import{d as N,r as j,aL as F,aM as C,h as H,C as X,V as G,H as q,aj as J,E as K,G as y,N as O,X as Q,M as U,b as Y,a4 as Z,a3 as $,o as tt}from"./index-Ct6ceUkE.js";import{D as ot}from"./index-DHQU-fng.js";import{g as et}from"./index-ZORhgBxb.js";import{i as nt}from"./initThree-hbYHqMqB.js";import{p as at}from"./disco_communism-jY_aEFqL.js";import"./OrbitControls-BAA5edm8.js";import"./initStats-C5VNgmNK.js";import"./_commonjsHelpers-BosuxZz1.js";const yt=N({__name:"crushPic",setup(rt){const{random:a,floor:st,ceil:it,PI:m,min:pt,max:R}=Math,x=j();class k extends Z{constructor(u,S){super(new $(u),{depth:S,bevelEnabled:!1})}}const f=new F().load(at);return f.wrapS=C,f.wrapT=C,H(()=>{const{scene:s,camera:u,renderer:S,renderWrap:z}=nt(x.value,!1,!1,!1);s.background=new X(14774357),u.position.set(0,0,800);const n=new G(600,800),d=40,B=10,r=new q;s.add(r);const L=R(n.x,n.y),D=16742777,b=new J(D,10,L,1);b.position.set(40,40,400),s.add(b);const T=new K(4210752);s.add(T);const c=[];for(let t=-n.x/2;t<n.x/2;t+=d)for(let e=-n.y/2;e<n.y/2;e+=d){const o=new G(a()*d+t,a()*d+e);c.push(o)}const l=ot.from(c.map(t=>[t.x,t.y])).triangles,A=l.length/3;for(let t=0;t<l.length;t+=3){const e=c[l[t]],o=c[l[t+1]],W=c[l[t+2]],g=new k([e,o,W],B),M=g.getAttribute("position"),P=[];for(let w=0;w<M.count;w++){const v=new y().fromBufferAttribute(M,w);P.push((v.x-n.x/2)/n.x,(v.y-n.y/2)/n.y)}g.setAttribute("uv",new O(new Float32Array(P),2));const I=new Q({map:f}),E=new U(g,I);E.position.set(0,0,0),r.add(E)}const i=m,p=800,_=Array.from({length:A}).fill(0).map(()=>new y(a()*i-i/2,a()*i-i/2,a()*i-i/2)),h=Array.from({length:A}).fill(0).map(()=>new y(a()*p-p/2,a()*p-p/2,a()*p-p/2));function V(){const t=et.timeline({repeat:-1});t.to(r.rotation,{y:m*2,duration:4,ease:"power2.out"}).add("groupRotateStop"),r.children.forEach((e,o)=>{t.to(e.rotation,{x:_[o].x,y:_[o].y,duration:3,ease:"power2.out"},o===0?"groupRotateStop-=3":"<"),t.to(e.position,{x:h[o].x,y:h[o].y,z:h[o].z,duration:3,ease:"power2.out"},o===0?"groupRotateStop-=3":"<"),o===r.children.length-1&&t.add("randomStop")}),r.children.forEach((e,o)=>{t.to(e.rotation,{x:0,y:0,duration:3,ease:"power2.out"},o===0?"randomStop":"<"),t.to(e.position,{x:0,y:0,z:0,duration:3,ease:"power2.out"},o===0?"randomStop":"<")}),t.to(r.rotation,{y:m*4,duration:4,ease:"power2.out"},"randomStop")}z()(),V()}),(s,u)=>(tt(),Y("div",{ref_key:"con",ref:x,class:"w-full h-full"},null,512))}});export{yt as default};
