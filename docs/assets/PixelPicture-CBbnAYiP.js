import{a as p}from"./p5.min-WfQBoNak.js";import{i as U}from"./initGUI-oTOkqKW2.js";import{d as P,A,B as R,e as y,f,o as I,_ as k,r as _,j as D,q as x}from"./index-CqfaNC88.js";import{P as M}from"./P5-CFZ07hFp.js";import"./dat.gui.module-DYGKXP-V.js";const q={class:"loading"},E=P({__name:"Loading",props:{isLoading:{type:Boolean,default:!1},type:{default:0}},setup(L){return(h,l)=>A((I(),y("div",q,l[0]||(l[0]=[f("div",{class:"mask"},null,-1),f("div",{class:"loader"},[f("div",{class:"ring"})],-1)]),512)),[[R,h.isLoading]])}}),F=k(E,[["__scopeId","data-v-a82a1169"]]),C="/nova/assets/test-rkdeV249.jpg",G=P({__name:"PixelPicture",setup(L){const{min:h}=Math,l=_(!1);let t,g=C,c,r;const n={sampleNum:20,isCircle:!1,importImg(){var s;(s=u.value)==null||s.click()},downloadImg(){t.saveCanvas()}},d=[],u=_();function V(){if(u.value){const s=u.value.files[0];g=URL.createObjectURL(s),v(g)}}const w=_();D(()=>{const{gui:s}=U(w.value);s.add(n,"sampleNum",10,100,1).name("sampleNum").onFinishChange(e=>{v(g)}),s.add(n,"isCircle").name("ShowCircle"),s.add(n,"importImg").name("LoadLocalImg").listen(),s.add(n,"downloadImg").name("DownLoad").listen()});class z{constructor(e,o,a){this.vel=new p.Vector(0,0),this.tarPos=e,this.pos=new p.Vector(t.random(0,c),t.random(0,r)),this.color=o,this.size=a}show(){t.noStroke(),t.fill(this.color),n.isCircle?t.circle(this.pos.x,this.pos.y,this.size):t.rect(this.pos.x,this.pos.y,this.size,this.size)}update(){const e=p.Vector.dist(this.pos,this.tarPos),o=p.Vector.sub(this.tarPos,this.pos),a=t.map(e,0,50,.08,.3,!0);o.mult(a),this.vel.set(o),this.pos.add(this.vel)}}function N(s,e){let o=600,a=600;const i=s/e;i>1?a=o/i:o=a*i,c=o,r=a,t.createCanvas(c,r)}function v(s){l.value=!0,t.loadImage(s,e=>{N(e.width,e.height);const o=h(e.width,e.height)/n.sampleNum,a=h(c,r)/n.sampleNum;d.length=0,e.loadPixels();for(let i=0;i<e.height;i+=o)for(let m=0;m<e.width;m+=o){const j=e.get(m,i),B=m/e.width*c,S=i/e.height*r;d.push(new z(new p.Vector(B,S),j,a))}l.value=!1})}function b(s){t=s,t.setup=function(){v(C)},t.draw=function(){t.background(51);for(let e=d.length-1;e>=0;e--)d[e].update(),d[e].show()}}return(s,e)=>(I(),y("div",{ref_key:"con",ref:w,class:"viewCon"},[f("input",{ref_key:"file",ref:u,type:"file",accept:"image/png, image/jpeg, image/jpg",style:{display:"none"},onChange:V},null,544),x(M,{sketch:b}),x(F,{"is-loading":l.value},null,8,["is-loading"])],512))}}),K=k(G,[["__scopeId","data-v-b50bff85"]]);export{K as default};
