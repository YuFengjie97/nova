import{a as L}from"./simplex-noise-BkggsaiG.js";import{m as W}from"./audio-sugarCrush-1d8eZUIK.js";import{i as $}from"./audio2-Bh-ajUVZ.js";import{d as J,r,j as K,H as O,e as Q,f as q,t as U,o as X,_ as Y}from"./index-CqfaNC88.js";const n=800,l=32,Z=2,tt=100,st=J({__name:"mihuanshuibo",setup(et){L();const{min:I,PI:E,sin:m,cos:v,sqrt:F,floor:N}=Math,x=E*2,h=r(!1),g=r(()=>{}),_=r(()=>{});function R(){h.value?_.value():g.value()}const d=r(),o=r(),z=n*.2,M=N(l/Z),w=n*.2;return K(()=>{const{width:D,height:S}=d.value.getBoundingClientRect(),{stats:V}=O(d.value),B=`${I(D,S)}px`;o.value.style.width=B,o.value.style.height=B,o.value.width=n,o.value.height=n;const a=o.value.getContext("2d");a.strokeStyle="#fff",a.lineWidth=2,a.translate(n/2,n/2);const{audio:u,getAnalyser:j}=$(W,l);let C=!1,k;const A=new Float32Array(l);class G{constructor(t,s,e){this.i=0,this.angle=0,this.xBase=0,this.yBase=0,this.x=0,this.y=0,this.dx=0,this.dy=0,this.i=t,this.angle=t/l*x,this.x=s,this.y=e,this.xBase=s,this.yBase=e}updateD(){const t=A[this.i];performance.now()/1e3;const s=t*(this.i%M===0?w*1.4:w),e=v(this.angle)*s,i=m(this.angle)*s;this.dx=e,this.dy=i}update(){const t=this.xBase+this.dx,s=this.yBase+this.dy;this.x+=(t-this.x)*.1,this.y+=(s-this.y)*.1}}class H{constructor(t){this.gradientDist=n/2,this.points=t}updateD(){this.points.forEach(t=>t.updateD())}update(){this.points.forEach((t,s)=>{s===10&&(this.gradientDist=F(t.x**2+t.y**2)),t.update()})}drawShape(){let t=0,s=0;for(let i=0;i<this.points.length;i++){const c=this.points[i],T=i===this.points.length-1?this.points[0]:this.points[i+1],f=(c.x+T.x)/2,y=(c.y+T.y)/2;i===0?(a.beginPath(),a.moveTo(f,y),t=f,s=y):a.quadraticCurveTo(c.x,c.y,f,y)}a.quadraticCurveTo(this.points[0].x,this.points[0].y,t,s);const e=a.createRadialGradient(0,0,0,0,0,this.gradientDist);e.addColorStop(0,"#fd79a8"),e.addColorStop(.5,"#81ecec"),e.addColorStop(1,"#ff7675"),a.fillStyle=e,a.fill()}draw(){this.drawShape()}}const p=new H(Array.from({length:l}).map((b,t)=>{const s=t/l*x,e=z,i=v(s)*e,c=m(s)*e;return new G(t,i,c)}));function P(){V.update(),a.clearRect(-800/2,-800/2,n,n),p.update(),p.draw(),requestAnimationFrame(P)}P(),g.value=()=>{u.paused&&(u.play(),h.value=!0,!C&&(k=j().analyser,C=!0,setInterval(()=>{k.getFloatTimeDomainData(A),p.updateD()},tt)))},_.value=()=>{u.pause(),h.value=!1}}),(D,S)=>(X(),Q("div",{ref_key:"con",ref:d,class:"con w-full h-full bg-#000"},[q("div",{class:"bt",onClick:R},U(h.value?"pause":"play"),1),q("canvas",{ref_key:"canvas",ref:o,class:"canvas",width:"400",height:"400"},null,512)],512))}}),ct=Y(st,[["__scopeId","data-v-16fe4b06"]]);export{ct as default};
