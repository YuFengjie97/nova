var B=Object.defineProperty;var M=(a,e,i)=>e in a?B(a,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[e]=i;var n=(a,e,i)=>(M(a,typeof e!="symbol"?e+"":e,i),i);import{d as D,r as S,e as v,q as g,A as E,o as V,b2 as L,b4 as O}from"./index-Dk52mj26.js";import{P as R}from"./P5Con-Cx4nSln6.js";import{A as q}from"./AudioController-Bj40XwAW.js";import{i as F,n as H}from"./p5bezier-CIE_Y1Yz.js";import{m as N}from"./audio-sugarCrush-1d8eZUIK.js";const T={class:"w-full h-full"},W=250,h=100,j=.9,G="#5f27cd",Z=D({__name:"MusicCircle",setup(a){const{PI:e,random:i,floor:x,min:P}=Math;let u,l;const p=S(64),d=p.value/2,m=[],c=[];let f;class _{constructor(o,s,r){n(this,"$p");n(this,"angle");n(this,"basePos");n(this,"pos");n(this,"r",2);n(this,"audioIndex",0);n(this,"h",0);n(this,"count",0);this.$p=o,this.angle=s,this.basePos=L.Vector.fromAngle(s,P(u,l)/2*j),this.pos=this.basePos.copy(),this.audioIndex=r}draw(){const{$p:o,pos:{x:s,y:r},h:z,count:C}=this;o.noStroke(),o.fill((z+C)%255,255,127),o.circle(s,r,this.r*2)}update(o){this.pos=this.basePos.copy().mult(o),this.h=x(o*255),this.count++}}function b(t){f=t}function w(t){const o=O(d);for(let s=0;s<d;s++)m.push(new _(t,e*2/d*s,o()??0))}function A(){const t=f.getAudioData();c.length=0,m.forEach(o=>{const s=t[o.audioIndex],r=s<h?h:s;o.update(r/W),o.draw(),s>h&&c.push([o.pos.x,o.pos.y])})}function I(t){t.noFill(),t.stroke(G),t.strokeWeight(2),c.length>=10&&H(c,"CLOSE")}function k(t,o){u=t.width,l=t.height,t.colorMode(t.HSB),F(o),w(t)}function y(t){t.translate(u/2,l/2),t.background("rgba(0, 0, 0, 0.07)"),f&&(A(),I(t))}return(t,o)=>(V(),v("div",T,[g(q,{class:"absolute top-0 left-0 z-100","audio-src":E(N),"fft-size":p.value,onInitAudioAnalyser:b},null,8,["audio-src","fft-size"]),g(R,{setup:k,draw:y})]))}});export{Z as default};
