import{d as T,r as B,j,e as S,n as R,o as z}from"./index-CqfaNC88.js";const D=T({__name:"circuitBoard2",setup(W){const{floor:$,random:f}=Math,L=B(),p=B(),n={size:20,wireMaxLen:40,stroke:"#81ecec",bg:"#000",pathBg:"#2d3436",pathBloomLength:10,bloomSpeed:50,straightness:2},E=B(n.bg);return j(()=>{const{width:y,height:k}=L.value.getBoundingClientRect();p.value.setAttribute("width",`${y}`),p.value.setAttribute("height",`${k}`);const A=$(k/n.size),m=$(y/n.size);let _=$(A*m);const v=[],c={},C=[],N=[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]];class F{constructor(t,s){this.x=0,this.y=0,this.available=!0,this.dirInd=$(f()*N.length),this.x=t,this.y=s}}class O{constructor(t){this.cells=[],t.available=!1,this.cells.push(t),_-=1}validNoCrossOver(t,s){var l,h,e,r,g,i,w,x;if([0,2,4,6].includes(s))return!0;if(s===1){const a=((l=c[`${t.x},${t.y-1}`])==null?void 0:l.available)??!0,o=((h=c[`${t.x+1},${t.y}`])==null?void 0:h.available)??!0;if(a&&o)return!0}if(s===3){const a=((e=c[`${t.x+1},${t.y}`])==null?void 0:e.available)??!0,o=((r=c[`${t.x},${t.y+1}`])==null?void 0:r.available)??!0;if(a&&o)return!0}if(s===5){const a=((g=c[`${t.x-1},${t.y}`])==null?void 0:g.available)??!0,o=((i=c[`${t.x},${t.y+1}`])==null?void 0:i.available)??!0;if(a&&o)return!0}if(s===7){const a=((w=c[`${t.x-1},${t.y}`])==null?void 0:w.available)??!0,o=((x=c[`${t.x},${t.y-1}`])==null?void 0:x.available)??!0;if(a&&o)return!0}return!1}generate(){for(;this.cells.length<n.wireMaxLen;){const t=this.cells[this.cells.length-1],s=f()<.5?[0,1,-1]:[0,-1,1];for(;s.length>0;){let l=t.dirInd+s.splice($(f()**n.straightness*s.length),1)[0];l=l<0?8+l:l%8;const h=N[l],e=t.x+h[0],r=t.y+h[1],g=r*m+e,i=g>=0&&g<v.length?v[g]:!1;if(!(e<0||e>=m||r<0||r>=A||!i||!i.available||!this.validNoCrossOver(t,l))){i.available=!1,i.dirInd=l,_-=1,this.cells.push(i);break}}if(s.length===0)break}}draw(){var x,a,o,M;const t=document.createElementNS("http://www.w3.org/2000/svg","path"),s=document.createElementNS("http://www.w3.org/2000/svg","circle"),l=document.createElementNS("http://www.w3.org/2000/svg","circle");let h="";const e=n.size,r=f()*(e/6)+e/12;s.setAttribute("r",`${r}`),l.setAttribute("r",`${r}`),s.setAttribute("stroke",n.stroke),l.setAttribute("stroke",n.stroke),s.setAttribute("stroke-width",`${r/4}`),l.setAttribute("stroke-width",`${r/2}`);const g=f()>.5;s.setAttribute("fill",g?n.stroke:n.bg),l.setAttribute("fill",g?n.stroke:n.bg);for(let b=0;b<this.cells.length;b+=1){const d=this.cells[b];b===0&&(h+=`M ${d.x*e+e/2} ${d.y*e+e/2}`,s.setAttribute("cx",`${d.x*e+e/2}`),s.setAttribute("cy",`${d.y*e+e/2}`)),b<this.cells.length&&(h+=` L ${d.x*e+e/2} ${d.y*e+e/2}`),b===this.cells.length-1&&(l.setAttribute("cx",`${d.x*e+e/2}`),l.setAttribute("cy",`${d.y*e+e/2}`))}t.setAttribute("d",h),t.setAttribute("fill","none"),t.setAttribute("stroke",n.stroke),t.setAttribute("stroke-width",`${r*2}`);const i=t.getTotalLength();t.style.cssText=`
      --len: ${i}; 
      --len-1:${-i};
      --len_add_bloomLen:${i+n.pathBloomLength};
      --animate-time:${(i/n.bloomSpeed).toFixed(1)}s
      `;const w=f()>.5;if(w){const b=t.cloneNode(!1);t.setAttribute("stroke",n.pathBg),(x=p.value)==null||x.append(b)}t.classList.add(w?"animated-path-repeat":"animated-path-once"),(a=p.value)==null||a.append(t),(o=p.value)==null||o.append(s),(M=p.value)==null||M.append(l)}}for(let u=0;u<A;u+=1)for(let t=0;t<m;t+=1){const s=new F(t,u);v.push(s),c[`${t},${u}`]=s}for(;C.length<_;){const u=v[$(f()*v.length)];if(!u.available)continue;const t=new O(u);C.push(t),t.generate(),t.draw()}}),(y,k)=>(z(),S("div",{ref_key:"con",ref:L,class:"w-full h-full",style:R({background:E.value})},[(z(),S("svg",{ref_key:"svgCon",ref:p,class:"block",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},null,512))],4))}});export{D as default};
