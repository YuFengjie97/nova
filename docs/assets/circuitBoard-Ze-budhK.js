var I=Object.defineProperty;var R=(d,i,v)=>i in d?I(d,i,{enumerable:!0,configurable:!0,writable:!0,value:v}):d[i]=v;var x=(d,i,v)=>(R(d,typeof i!="symbol"?i+"":i,v),v);import{d as T,r as L,h as W,o as z,b as B}from"./index-RK8JUcLd.js";const D=T({__name:"circuitBoard",setup(d){const{floor:i,random:v}=Math,M=L(),g=L(),w={size:10,leave:10,wireMaxLen:40,stroke:"#ff9f43",fill:"#10ac84"};return W(()=>{const{width:A,height:m}=M.value.getBoundingClientRect();g.value.setAttribute("width",`${A}`),g.value.setAttribute("height",`${m}`);const k=i(m/w.size),y=i(A/w.size),E=i(k*y/(w.wireMaxLen+w.leave)),p=[],u={},C=[],_=[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],N=_.length;class S{constructor(t,e){x(this,"x",0);x(this,"y",0);x(this,"available",!0);x(this,"dirInd",i(v()*_.length));this.x=t,this.y=e}}class O{constructor(t){x(this,"cells",[]);t.available=!1,this.cells.push(t)}validNoCrossOver(t,e){var l,a,s,$,c,h,b,o;if([0,2,4,6].includes(e))return!0;if(e===1){const n=((l=u[`${t.x},${t.y-1}`])==null?void 0:l.available)??!0,r=((a=u[`${t.x+1},${t.y}`])==null?void 0:a.available)??!0;if(n&&r)return!0}if(e===3){const n=((s=u[`${t.x+1},${t.y}`])==null?void 0:s.available)??!0,r=(($=u[`${t.x},${t.y+1}`])==null?void 0:$.available)??!0;if(n&&r)return!0}if(e===5){const n=((c=u[`${t.x-1},${t.y}`])==null?void 0:c.available)??!0,r=((h=u[`${t.x},${t.y+1}`])==null?void 0:h.available)??!0;if(n&&r)return!0}if(e===7){const n=((b=u[`${t.x-1},${t.y}`])==null?void 0:b.available)??!0,r=((o=u[`${t.x},${t.y-1}`])==null?void 0:o.available)??!0;if(n&&r)return!0}return!1}generate(){let t=!0;for(;this.cells.length<w.wireMaxLen&&t;){t=!0;let e=0,l=0;for(;l<N;){const a=this.cells[this.cells.length-1],s=(a.dirInd+e)%8,$=_[s],c=a.x+$[0],h=a.y+$[1],b=h*y+c;if(c<0||c>=y||h<0||h>=k||b<0||b>=p.length){e+=1,l+=1;continue}const o=p[b];if(!o.available){e+=1,l+=1;continue}if(!this.validNoCrossOver(a,s)){e+=1,l+=1;continue}o.available=!1,o.dirInd=s,this.cells.push(o),e=0,l=0;break}l===N&&(t=!1,e=0,l=0)}}draw(){var h,b,o;const t=document.createElementNS("http://www.w3.org/2000/svg","path"),e=document.createElementNS("http://www.w3.org/2000/svg","circle"),l=document.createElementNS("http://www.w3.org/2000/svg","circle");let a="";const s=w.size,$=s/3;e.setAttribute("r",`${$}`),l.setAttribute("r",`${$}`),e.setAttribute("stroke","#fff"),l.setAttribute("stroke","#fff"),e.setAttribute("fill","#ff9f43"),l.setAttribute("fill","#ff9f43");for(let n=0;n<this.cells.length;n+=1){const r=this.cells[n];n===0&&(a+=`M ${r.x*s+s/2} ${r.y*s+s/2}`,e.setAttribute("cx",`${r.x*s+s/2}`),e.setAttribute("cy",`${r.y*s+s/2}`)),n<this.cells.length&&(a+=` L ${r.x*s+s/2} ${r.y*s+s/2}`),n===this.cells.length-1&&(l.setAttribute("cx",`${r.x*s+s/2}`),l.setAttribute("cy",`${r.y*s+s/2}`))}t.setAttribute("d",a),t.setAttribute("fill","none"),t.setAttribute("stroke",w.stroke),t.setAttribute("stroke-width",`${w.size/4}`);const c=t.getTotalLength();t.setAttribute("stroke-dasharray",`${c}, ${c}`),t.setAttribute("stroke-dashoffset",`${c}`),t.classList.add("animated-path"),(h=g.value)==null||h.append(t),(b=g.value)==null||b.append(e),(o=g.value)==null||o.append(l)}}for(let f=0;f<k;f+=1)for(let t=0;t<y;t+=1){const e=new S(t,f);p.push(e),u[`${t},${f}`]=e}for(;C.length<E;){const f=p[i(v()*p.length)];if(!f.available)continue;const t=new O(f);C.push(t),t.generate(),t.draw()}}),(A,m)=>(z(),B("div",{ref_key:"con",ref:M,class:"w-full h-full bg-#10ac84"},[(z(),B("svg",{ref_key:"svgCon",ref:g,class:"block",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},null,512))],512))}});export{D as default};
