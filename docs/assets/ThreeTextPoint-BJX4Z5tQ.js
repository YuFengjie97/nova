import{d as J,r as H,C as Q,j as tt,e as et,A as nt,f as W,ar as at,aj as it,as as ot,at as L,au as st,O as rt,J as lt,S as ct,I as dt,P as ht,W as ut,K as ft,o as pt,_ as mt}from"./index-CqfaNC88.js";import{S as wt}from"./stats.module--VATS4Kh.js";const gt={class:"viewCon"},b=20,xt="Verdana",u=.5,vt=J({__name:"ThreeTextPoint",setup(Ct){const{random:g,PI:_}=Math;let z="Hello World";const y=H("Hello World");function j(){z=y.value,P(),F(),T()}const E=H(),R=H();let f=window.innerWidth,p=window.innerHeight,S,M,s,m,w,P,l=[];const c={};let A,I,i,d;const o={width:0,height:0};class B{constructor(t,r){this.z=0,this.rotationX=g()*2*_,this.rotationY=g()*2*_,this.rotationZ=g()*2*_,this.deltaRotation=.2*(g()-.5),this.scale=0,this.deltaScale=.1,this.toKeep=!0,this.x=t,this.y=r}update(){this.rotationX+=this.deltaRotation,this.rotationY+=this.deltaRotation,this.rotationZ+=this.deltaRotation,this.scale<1&&(this.scale+=this.deltaScale)}}function V(){const a=document.createElement("canvas"),t=a.getContext("2d");return a.width=a.height=0,function(){o.width=0,o.height=0;const r=z.split(`
`),x=r.reduce((e,n)=>n.length>e.length?n:e," ").length*b,v=r.length*b;a.width=x,a.height=v,t.font=`${b}px ${xt}`,t.fillStyle="red";for(let e=0,n=r.length;e<n;e++)t.fillText(r[e],0,(e+.8)*(v/n));const q=t.getImageData(0,0,x,v),K=1;for(let e=0;e<v;e+=K)for(let n=0;n<x;n+=K){const h=`x:${n}y:${e}`;if(q.data[(n+e*x)*4]>0)if(n>o.width&&(o.width=n),e>o.height&&(o.height=e),c[h])c[h].toKeep=!0;else{const C=new B(n*u,-e*u);l.push(C),c[h]=C}else c[h]&&(c[h].toKeep=!1,delete c[h]);l=l.filter(C=>C.toKeep)}}}function $(){A=new it(.35,.15,16,50),I=new ot({}),i=new L(A,I,l.length),i.position.x=-.5*o.width*u,i.position.y=-1.5*o.height*u,s.add(i),d=new st}function F(){s.remove(i),i=new L(A,I,l.length),i.position.x=-.5*o.width*u,i.position.y=-1.5*o.height*u,s.add(i)}function T(){let a=0;l.forEach(t=>{d.rotation.set(t.rotationX,t.rotationY,t.rotationZ),d.scale.set(t.scale,t.scale,t.scale),d.position.set(t.x,o.height+t.y,t.z),d.updateMatrix(),i.setMatrixAt(a,d.matrix),a++,t.update()}),i.instanceMatrix.needsUpdate=!0}function G(){S=wt(),R.value.append(S.dom)}function N(){M=new rt(m,w.domElement),M.object.position.set(0,0,30),M.target.set(0,0,0)}function O(){s.add(new lt(1e3))}function U(){f=window.innerWidth,p=window.innerHeight,m.aspect=f/p,m.updateProjectionMatrix(),w.setSize(f,p)}function X(){s=new ct,s.background=new dt(4473924),m=new ht(75,f/p,1,4e3),w=new ut({canvas:E.value,antialias:!0}),w.setSize(f,p),window.addEventListener("resize",U)}function Y(){const a=new ft(4210752);s.add(a)}function Z(){T()}let k=0;function D(){k=requestAnimationFrame(D),S.update(),Z(),w.render(s,m)}return Q(()=>{cancelAnimationFrame(k)}),tt(()=>{X(),N(),P=V(),P(),$(),T(),Y(),O(),G(),D()}),(a,t)=>(pt(),et("div",gt,[nt(W("textarea",{"onUpdate:modelValue":t[0]||(t[0]=r=>y.value=r),class:"input",type:"text",rows:"5",cols:"50",onKeyup:j},null,544),[[at,y.value]]),W("div",{ref_key:"canvasCon",ref:R,class:"canvasCon"},[W("canvas",{ref_key:"canvasDom",ref:E,class:"canvas"},null,512)],512)]))}}),Mt=mt(vt,[["__scopeId","data-v-4f5f8d30"]]);export{Mt as default};
