var q=Object.defineProperty;var E=(l,r,s)=>r in l?q(l,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[r]=s;var o=(l,r,s)=>(E(l,typeof r!="symbol"?r+"":r,s),s);import{f as c}from"./fabric-CC8fIGBw.js";import{C as G}from"./Card-BziLIrQd.js";import{n as P}from"./noise-CqzBSU_F.js";import"./p5.min-CL2oBVPI.js";import{d as T,r as X,C as U,h as v,o as J,b as K,l as O,p as Q,e as Y,_ as Z}from"./index-CNxnBlAo.js";const $={class:"flowField"},g=50,ee=.3,te=.3,oe=8e-4,ie=360,ne=T({__name:"FlowField",setup(l){const{sin:r,cos:s,PI:re,ceil:F,random:le}=Math,b=X(),C=X(),x=[];let e=null,h=0,p=0,k=0,u=0,W=0;class H{constructor(t,n){o(this,"position");o(this,"size");o(this,"angle",45);o(this,"originRadius",4);o(this,"lineWidth",2);o(this,"borderWidth",1);o(this,"triangleWidth",10);o(this,"triangleHeight",14);o(this,"arrowColor","#e74c3c");o(this,"group");this.position=t,this.size=n;const{angle:a,lineWidth:w,borderWidth:m,arrowColor:_,originRadius:L,triangleWidth:M,triangleHeight:I,position:{x:d,y:f}}=this,N=new c.fabric.Rect({left:d,top:f,width:n,height:n,stroke:"#3498db",strokeWidth:m,fill:"#fff"});e==null||e.add(N);const S=new c.fabric.Circle({originX:"center",originY:"center",top:f,left:d,radius:L,fill:_});e==null||e.add(S);const B=n*.7+d,R=f,V=new c.fabric.Line([d,f,B,R],{originX:"left",originY:"center",stroke:_,strokeWidth:w,strokeLineCap:"round"}),j=new c.fabric.Triangle({originX:"center",originY:"top",top:R,left:B+I,width:M,height:I,fill:_,angle:90});this.group=new c.fabric.Group([V,j],{top:f,left:d,angle:a,originX:"left",originY:"center"}),e==null||e.add(this.group)}updateAngle(t){this.group.set("angle",t)}}function z(){for(let i=0;i<p;i+=g)for(let t=0;t<h;t+=g)x.push(new H({x:t,y:i},g))}function D(){let i=0;for(let t=0;t<k;t++){i+=ee,W+=oe;let n=0;for(let a=0;a<u;a++){n+=te;const w=P(i,n,W)*ie,m=a+t*u;x[m].updateAngle(w)}}e==null||e.renderAll()}let y=0;function A(){D(),y=requestAnimationFrame(A),e==null||e.renderAll()}return U(()=>{cancelAnimationFrame(y)}),v(()=>{var n;const{width:i,height:t}=(n=b.value)==null?void 0:n.getBoundingClientRect();h=i,p=t,u=F(h/g),k=F(p/g),e=new c.fabric.StaticCanvas(C.value,{width:h,height:p,backgroundColor:"#3498db"}),z(),A()}),(i,t)=>(J(),K("div",$,[O(G,{class:"card"},{default:Q(()=>[Y("div",{ref_key:"con",ref:b,class:"con"},[Y("canvas",{ref_key:"canvasDom",ref:C},null,512)],512)]),_:1})]))}}),he=Z(ne,[["__scopeId","data-v-a3c437aa"]]);export{he as default};
