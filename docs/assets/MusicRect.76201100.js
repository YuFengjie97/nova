var C=Object.defineProperty;var E=(c,i,a)=>i in c?C(c,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[i]=a;var r=(c,i,a)=>(E(c,typeof i!="symbol"?i+"":i,a),a);import{A as S,a as L,i as b,n as H}from"./p5bezier.865a72e1.js";import{P as D}from"./P5Con.59961f17.js";import{p as I}from"./p5.min.a014bf83.js";import{d as N,b as P,c as T,e as x,u as V,o as W,_ as F}from"./index.ee6613f3.js";const j={class:"viewCon"},q=N({__name:"MusicRect",setup(c){let i;function a(e){i=e}let m,n;const g=P(128),d=250,h=g.value/2,p=[];let u,R=2,w=.6,A=60;class k{constructor(t,s){r(this,"$p");r(this,"pos");r(this,"h",0);r(this,"rectHeight",0);this.$p=t,this.pos=s}draw(t,s){let{$p:o,pos:{x:f,y:l},rectHeight:_}=this;o.fill(this.h,255,127),o.push(),o.rectMode(o.CENTER),o.noStroke(),o.translate(0,n/2),o.rect(f,l,u,this.rectHeight+R),o.pop()}update(t){this.updateH(t),this.updateHeight(t)}updateH(t){this.h=this.$p.map(t,0,d,0,255)}updateHeight(t){this.rectHeight=this.$p.map(t,0,d,0,n*w)}}function v(e){for(let t=0;t<h;t++)p.push(new k(e,new I.Vector(t*u,0)))}function y(e){for(let t=0;t<h;t++){let s=i.getAudioData()[t];p[t].update(s),p[t].draw(s,t)}}function M(e){e.push(),e.translate(0,n/2),e.noFill(),e.stroke("#fff"),e.strokeWeight(2);let t=[],s=[];i.getAudioData().forEach((o,f)=>{let l=f*u,_=e.map(o,0,d,0,n/2)*w+A;t.push([l,-_]),s.push([l,_])}),H(t),H(s),e.pop()}function z(e,t){m=e.width,n=e.height,u=m/h,e.frameRate(30),e.colorMode(e.HSB),e.noStroke(),v(e),t&&b(t)}function B(e){e.background("#2d3436"),i&&(y(),M(e))}return(e,t)=>(W(),T("div",j,[x(S,{class:"ac","audio-src":V(L),"fft-size":g.value,onInitAudioAnalyser:a},null,8,["audio-src","fft-size"]),x(D,{setup:z,draw:B})]))}});const U=F(q,[["__scopeId","data-v-37a29c0a"]]);export{U as default};
