import{d as I,r as B,j as O,e as R,f as T,o as W}from"./index-CqfaNC88.js";const V=I({__name:"circuitBoard",setup(j){const{floor:d,random:_,PI:z}=Math,y=B(),N=B(),i={size:10,leave:2,wireMaxLen:20};return O(()=>{const{width:w,height:$}=y.value.getBoundingClientRect();y.value.width=w,y.value.height=$;const s=y.value.getContext("2d");s.fillStyle="#10ac84",s.strokeStyle="#ff9f43",s.lineWidth=i.size/4,s.fillRect(0,0,w,$);const k=d($/i.size),p=d(w/i.size),P=d(k*p/(i.wireMaxLen+i.leave)),g=[],a={},M=[],m=[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],C=m.length;class S{constructor(e,l){this.x=0,this.y=0,this.available=!0,this.dirInd=d(_()*m.length),this.x=e,this.y=l}}class L{constructor(e){this.cells=[],e.available=!1,this.cells.push(e)}validNoCrossOver(e,l){var t,n,h,b,f,v,x,r;if([0,2,4,6].includes(l))return!0;if(l===1){const o=((t=a[`${e.x},${e.y-1}`])==null?void 0:t.available)??!0,u=((n=a[`${e.x+1},${e.y}`])==null?void 0:n.available)??!0;if(o&&u)return!0}if(l===3){const o=((h=a[`${e.x+1},${e.y}`])==null?void 0:h.available)??!0,u=((b=a[`${e.x},${e.y+1}`])==null?void 0:b.available)??!0;if(o&&u)return!0}if(l===5){const o=((f=a[`${e.x-1},${e.y}`])==null?void 0:f.available)??!0,u=((v=a[`${e.x},${e.y+1}`])==null?void 0:v.available)??!0;if(o&&u)return!0}if(l===7){const o=((x=a[`${e.x-1},${e.y}`])==null?void 0:x.available)??!0,u=((r=a[`${e.x},${e.y-1}`])==null?void 0:r.available)??!0;if(o&&u)return!0}return!1}generate(){let e=!0;for(;this.cells.length<i.wireMaxLen&&e;){e=!0;let l=0,t=0;for(;t<C;){const n=this.cells[this.cells.length-1],h=(n.dirInd+l)%8,b=m[h],f=n.x+b[0],v=n.y+b[1],x=v*p+f;if(f<0||f>=p||v<0||v>=k||x<0||x>=g.length){l+=1,t+=1;continue}const r=g[x];if(!r.available){l+=1,t+=1;continue}if(!this.validNoCrossOver(n,h)){l+=1,t+=1;continue}r.available=!1,r.dirInd=h,this.cells.push(r),l=0,t=0;break}t===C&&(e=!1,l=0,t=0)}}update(){}draw(){s.beginPath();const e=this.cells[0],l=this.cells[this.cells.length-1],t=i.size;s.moveTo(e.x*t+t/2,e.y*t+t/2);for(let n=1;n<this.cells.length;n++)s.lineTo(this.cells[n].x*t+t/2,this.cells[n].y*t+t/2);s.stroke(),s.fillStyle="#fff",s.beginPath(),s.arc(e.x*t+t/2,e.y*t+t/2,i.size/4,0,z*2),s.fill(),s.stroke(),s.beginPath(),s.arc(l.x*t+t/2,l.y*t+t/2,i.size/4,0,z*2),s.fill(),s.stroke()}}for(let c=0;c<k;c+=1)for(let e=0;e<p;e+=1){const l=new S(e,c);g.push(l),a[`${e},${c}`]=l}for(;M.length<P;){const c=g[d(_()*g.length)];if(!c.available)continue;const e=new L(c);M.push(e),e.generate(),e.draw()}}),(w,$)=>(W(),R("div",{ref_key:"con",ref:N,class:"w-full h-full"},[T("canvas",{ref_key:"canvas",ref:y,class:"block w-full h-full"},null,512)],512))}});export{V as default};
