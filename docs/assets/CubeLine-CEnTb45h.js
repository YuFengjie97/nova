import{d as ne,r as I,G as te,j as ie,e as oe,f as E,T as ae,U as se,X as re,Y as ce,Z as B,R as le,$ as F,a0 as G,a1 as U,a2 as de,a3 as ue,a4 as we,a5 as me,O as pe,S as fe,P as he,W as ve,o as xe,_ as Ce}from"./index-Dk52mj26.js";import{S as ge}from"./stats.module--VATS4Kh.js";import{O as be}from"./OrbitControls-Rz_z-Chd.js";import{G as ye}from"./dat.gui.module-DcMWPYuf.js";const _e={class:"viewCon"},o=500,x=1e3,De=ne({__name:"CubeLine",setup(ze){const{random:d,sqrt:k}=Math,P=I(),H=I();let D,z,C,u,r,w,f,h=500;const n=new Float32Array(x*3),c=new Float32Array(x**2*3),l=new Float32Array(x**2*3),g=[];let b,y,A=100,M=20,m;const v={showDots:!0,showLines:!0,particleNum:500,minDistance:100,maxConnection:20};function N(){const e=new ye({width:300});e.add(v,"showDots").onChange(i=>{y.visible=i}),e.add(v,"showLines").onChange(i=>{m.visible=i}),e.add(v,"particleNum",0,x,1).onChange(i=>{h=i}),e.add(v,"minDistance",0,300,1).onChange(i=>{A=i}),e.add(v,"maxConnection",0,30,1).onChange(i=>{M=i})}function V(){w=new ae,C.add(w);const e=new se(o,o,o);f=new re(new ce(e)),f.material.color.setRGB(255,0,0),f.material.blending=B,f.material.transparent=!0,w.add(f)}function j(){for(let e=0;e<x;e++){const i=d()*o-o/2,_=d()*o-o/2,t=d()*o-o/2;n[e*3]=i,n[e*3+1]=_,n[e*3+2]=t,g.push({vel:new le(d()*2-1,d()*2-1,d()*2-1),numConnection:0})}}function O(){b=new F,b.setDrawRange(0,h),b.setAttribute("position",new G(n,3).setUsage(U));const e=new de({color:16777215,size:3,blending:B,transparent:!0,sizeAttenuation:!1});y=new ue(b,e),w.add(y)}function q(){const e=new we({vertexColors:!0,blending:B,transparent:!0}),i=new F;i.setAttribute("position",new G(c,3).setUsage(U)),i.setAttribute("color",new G(l,3).setUsage(U)),m=new me(i,e),w.add(m)}function T(){let e=0,i=0,_=0;for(let t=0;t<h;t++)g[t].numConnection=0;for(let t=0;t<h;t++){const a=g[t];if((n[t*3]<-o/2||n[t*3]>o/2)&&(a.vel.x=-a.vel.x),(n[t*3+1]<-o/2||n[t*3+1]>o/2)&&(a.vel.y=-a.vel.y),(n[t*3+2]<-o/2||n[t*3+2]>o/2)&&(a.vel.z=-a.vel.z),n[t*3]+=a.vel.x,n[t*3+1]+=a.vel.y,n[t*3+2]+=a.vel.z,!(a.numConnection>=M))for(let s=0;s<h;s++){const K=n[t*3]-n[s*3],Q=n[t*3+1]-n[s*3+1],ee=n[t*3+2]-n[s*3+2],S=k(K**2+Q**2+ee**2);if(S<A){const W=g[s];if(W.numConnection>=M)continue;a.numConnection++,W.numConnection++,c[i++]=n[t*3],c[i++]=n[t*3+1],c[i++]=n[t*3+2],c[i++]=n[s*3],c[i++]=n[s*3+1],c[i++]=n[s*3+2];const p=1-S/A;l[e++]=p,l[e++]=p,l[e++]=p,l[e++]=p,l[e++]=p,l[e++]=p,_++}}}m.geometry.setDrawRange(0,_*2),m.geometry.attributes.position.needsUpdate=!0,m.geometry.attributes.color.needsUpdate=!0,y.geometry.attributes.position.needsUpdate=!0}function $(){D=ge(),H.value.append(D.dom)}function X(){z=new be(u,r.domElement),z.minDistance=1e3,z.maxDistance=3e3}function Y(){C.add(new pe(1e3))}function Z(){u.aspect=window.innerWidth/window.innerHeight,u.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)}function J(){C=new fe,u=new he(45,window.innerWidth/window.innerHeight,1,4e3),u.position.z=1e3,r=new ve({canvas:P.value,antialias:!0}),r.setSize(window.innerWidth,window.innerHeight),r.setPixelRatio(window.devicePixelRatio),r.setSize(window.innerWidth,window.innerHeight),window.addEventListener("resize",Z)}let L=0;function R(){const e=Date.now()*1e-4;L=requestAnimationFrame(R),D.update(),T(),w.rotation.y=e,r.render(C,u)}return te(()=>{cancelAnimationFrame(L)}),ie(()=>{N(),J(),Y(),$(),X(),V(),j(),O(),q(),R()}),(e,i)=>(xe(),oe("div",_e,[E("div",{ref_key:"canvasCon",ref:H,class:"con"},[E("canvas",{ref_key:"canvasDom",ref:P,class:"canvas"},null,512)],512)]))}}),Ue=Ce(De,[["__scopeId","data-v-d65e4ebd"]]);export{Ue as default};
