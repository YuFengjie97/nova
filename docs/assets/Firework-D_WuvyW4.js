import{a as r}from"./p5.min-WfQBoNak.js";import{P as w}from"./P5-CFZ07hFp.js";import{d as v,r as g,e as k,q as I,o as _}from"./index-CqfaNC88.js";const b=v({__name:"Firework",setup(B){const{floor:n,PI:f}=Math;let s;const e=[],a=new r.Vector(0,.4);class l{constructor(i){this.h=s.random(255),this.d=3,this.dInc=.07,this.fires=[],this.isBoom=!1,this.isAlive=!0,this.pos=new r.Vector(i?i.x:s.mouseX,400),this.tarPos=new r.Vector(i?i.x:s.mouseX,i?i.y:s.mouseY),this.vel=new r.Vector(0,n(-s.random(2,6)))}show(){s.fill(this.h,255,255),this.isBoom||s.circle(this.pos.x,this.pos.y,this.d);for(let i=this.fires.length-1;i>=0;i--)this.fires[i].update(),this.fires[i].show(),this.fires[i].isOver()&&(this.fires.splice(i,1),this.fires.length===0&&(this.isAlive=!1))}boom(){const i=n(s.random(30,50));for(let o=0;o<i;o++){const h=r.Vector.fromAngle(s.random(2*f),s.floor(s.random(5,8)));this.fires.push(new d(this.pos.copy(),h,this.d/2,this.h))}}update(){this.pos.y>this.tarPos.y?(this.pos.add(this.vel),this.d+=this.dInc):this.isBoom||(this.boom(),this.isBoom=!0)}}class d{constructor(i,o,h,m){this.dInc=.001,this.life=255,this.lifeInc=4,this.pos=i,this.vel=o,this.d=h,this.h=m,this.lifeInc=s.floor(s.random(4,13))}show(){s.fill(this.h,255,this.life),s.circle(this.pos.x,this.pos.y,this.d)}update(){this.vel.add(a),this.vel.limit(4),this.pos.add(this.vel),this.d-=this.dInc,this.life-=this.lifeInc}isOver(){return this.life<=0||this.d<=0}}function p(){for(let t=e.length-1;t>=0;t--)e[t].update(),e[t].show(),e[t].isAlive||e.splice(t,1)}const c=g();function u(t){const{width:i,height:o}=c.value.getBoundingClientRect();s=t,s.setup=function(){s.createCanvas(i,o),s.colorMode(s.HSB),s.noStroke()},s.draw=function(){s.background("rgba(0,0,0,0.07)"),p()},s.mousePressed=function(){e.push(new l)},setInterval(()=>{for(let h=0;h<3;h++)e.push(new l(new r.Vector(s.random(i),s.random(o))))},1e3)}return(t,i)=>(_(),k("div",{ref_key:"con",ref:c,class:"w-full h-full"},[I(w,{sketch:u})],512))}});export{b as default};
