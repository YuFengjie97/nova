import{d as G,r as x,j as H,V as m,D as L,E as A,e as w,f as $,y as B,p as X,F as J,k as K,n as O,o as k,_ as Q}from"./index-CqfaNC88.js";import"./p5.min-WfQBoNak.js";import{g as U}from"./math-Cm0Zo__g.js";const Z={class:"w-full h-full flex justify-center bg-#c23616 overflow-hidden"},tt=["src"],ot=["src"],Y=30,et=G({__name:"crushPic",setup(nt){const{random:g,sqrt:I,floor:P,ceil:T}=Math,z=x([]),C=x(),_=x(),i=x([]),u=[];function V(){return new Promise(a=>{_.value.onload=()=>{const{width:l,height:p}=_.value.getBoundingClientRect();a({width:l,height:p})}})}return H(async()=>{if(!C.value)return;const{width:a,height:l}=await V(),p=new m(a/2,l/2);v(),setTimeout(()=>{j()},1e3);function v(){const n=[],s=P(I(Y)),o=T(Y/s),c=a/s,f=l/o;for(let t=0;t<s;t+=1)for(let e=0;e<o;e+=1){const d=new m((t+g())*c,(e+g())*f);n.push(d)}const r=L.from(n.map(t=>[t.x,t.y])).triangles;for(let t=0;t<r.length;t+=3){const e=n[r[t]],d=n[r[t+1]],b=n[r[t+2]],D=`clip-path: polygon(${e.x}px ${e.y}px,${d.x}px ${d.y}px,${b.x}px ${b.y}px)`;z.value.push(D);const E=U(e,d,b).sub(p),F=E.length()/new m(a/2,l/2).length(),h=new m().copy(E.normalize()).multiply(new m(.3,.3)),M=h.x*a/2,N=h.y*l/2,R=F*-200,S=g()>.8,W=S?h.x*200:0,q=S?h.y*200:0;u.push({x:M,y:N,z:R,rx:W,ry:q})}}function j(){const n=A.timeline({repeat:-1});u.forEach((s,o)=>{const{x:c,y:f,z:y,rx:r,ry:t}=s,e=i.value[o];n.to(e,{x:c,y:f,z:y,rotateX:r,rotateY:t,duration:1,ease:"bounce.out"},"<")}),u.forEach((s,o)=>{const{x:c,y:f,z:y,rx:r,ry:t}=s,e=i.value[o];n.to(e,{x:c,y:f,z:y,rotateX:r,rotateY:t,duration:1},o===0?">":"<")}),u.forEach((s,o)=>{const c=i.value[o];n.to(c,{x:0,y:0,z:0,rotateX:0,rotateY:0,duration:.3,ease:"bounce.out"},">")}),u.forEach((s,o)=>{const c=i.value[o];n.to(c,{x:0,y:0,z:0,rotateX:0,rotateY:0,duration:1},o===0?">":"<")})}}),(a,l)=>(k(),w("div",Z,[$("div",{ref_key:"picCon",ref:C,class:"pic-con relative h-full"},[$("img",{ref_key:"img",ref:_,class:"relative z--1 invisible block h-full",src:B(X)},null,8,tt),(k(!0),w(J,null,K(z.value,(p,v)=>(k(),w("img",{ref_for:!0,ref_key:"imgs",ref:i,key:v,style:O([p]),class:"absolute top-0 left-0 block h-full",src:B(X)},null,12,ot))),128))],512)]))}}),lt=Q(et,[["__scopeId","data-v-b01db4b7"]]);export{lt as default};
