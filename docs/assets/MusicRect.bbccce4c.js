var b=Object.defineProperty;var E=(r,i,a)=>i in r?b(r,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[i]=a;var u=(r,i,a)=>(E(r,typeof i!="symbol"?i+"":i,a),a);import{A as S,a as L,i as D,n as R}from"./p5bezier.bc40caa9.js";import{P as I}from"./P5Con.f63ebe60.js";import{p as N}from"./p5.min.f1d77678.js";import{d as P,b as T,c as V,e as x,u as W,o as F,_ as j}from"./index.c0bfbb90.js";const q={class:"viewCon"},G=P({__name:"MusicRect",setup(r){let i;function a(e){i=e}let m,c;const w=T(128),h=250,p=w.value/2,f=[];let n,A=2,H=.6,k=60;class v{constructor(t,s){u(this,"$p");u(this,"pos");u(this,"h",0);u(this,"rectHeight",0);this.$p=t,this.pos=s}draw(t,s){let{$p:o,pos:{x:_,y:l},rectHeight:g}=this;o.fill(this.h,255,127),o.push(),o.rectMode(o.CENTER),o.noStroke(),o.translate(0,c/2);let d=n*.2;o.rect(_,l,n,this.rectHeight+A,d,d,d,d),o.pop()}update(t){this.updateH(t),this.updateHeight(t)}updateH(t){this.h=this.$p.map(t,0,h,0,255)}updateHeight(t){this.rectHeight=this.$p.map(t,0,h,0,c*H)}}function y(e){for(let t=0;t<p;t++)f.push(new v(e,new N.Vector(t*n,0)))}function M(e){for(let t=0;t<p;t++){let s=i.getAudioData()[t];f[t].update(s),f[t].draw(s,t)}}function z(e){e.push(),e.translate(0,c/2),e.noFill(),e.stroke("#fff"),e.strokeWeight(2);let t=[],s=[];i.getAudioData().forEach((o,_)=>{let l=_*n,g=e.map(o,0,h,0,c/2)*H+k;t.push([l,-g]),s.push([l,g])}),R(t),R(s),e.pop()}function B(e,t){m=e.width,c=e.height,n=m/p,e.frameRate(30),e.colorMode(e.HSB),e.noStroke(),y(e),t&&D(t)}function C(e){e.background("rgba(0, 0, 0, 0.08)"),i&&(M(),z(e))}return(e,t)=>(F(),V("div",q,[x(S,{class:"ac","audio-src":W(L),"fft-size":w.value,onInitAudioAnalyser:a},null,8,["audio-src","fft-size"]),x(I,{setup:B,draw:C})]))}});const X=j(G,[["__scopeId","data-v-5af5dc79"]]);export{X as default};
