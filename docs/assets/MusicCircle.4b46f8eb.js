var D=Object.defineProperty;var S=(n,s,r)=>s in n?D(n,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[s]=r;var i=(n,s,r)=>(S(n,typeof s!="symbol"?s+"":s,r),r);import{p as E}from"./p5.min.f1d77678.js";import{P as L}from"./P5Con.f63ebe60.js";import{A as O,a as R,i as V,n as F}from"./p5bezier.bc40caa9.js";import{g as H}from"./math.c1d1c73e.js";import{d as N,b as T,c as W,e as m,u as j,o as q,_ as G}from"./index.c0bfbb90.js";const J={class:"viewCon"},K=N({__name:"MusicCircle",setup(n){const{PI:s,random:r,floor:g,min:x}=Math;let l,u;const p=T(64),d=p.value/2,_=[],c=[];let f,b=250,h=100,P=.9,w="#5f27cd";class C{constructor(o,e,a){i(this,"$p");i(this,"angle");i(this,"basePos");i(this,"pos");i(this,"r",2);i(this,"audioIndex",0);i(this,"h",0);i(this,"count",0);this.$p=o,this.angle=e,this.basePos=E.Vector.fromAngle(e,x(l,u)/2*P),this.pos=this.basePos.copy(),this.audioIndex=a}draw(){const{$p:o,pos:{x:e,y:a},h:z,count:B}=this;o.noStroke(),o.fill((z+B)%255,255,127),o.circle(e,a,this.r*2)}update(o){this.pos=this.basePos.copy().mult(o),this.h=g(o*255),this.count++}}function y(t){f=t}function A(t){var e;let o=H(d);for(let a=0;a<d;a++)_.push(new C(t,s*2/d*a,(e=o())!=null?e:0))}function I(){const t=f.getAudioData();c.length=0,_.forEach(o=>{let e=t[o.audioIndex],a=e<h?h:e;o.update(a/b),o.draw(),e>h&&c.push([o.pos.x,o.pos.y])})}function v(t){t.noFill(),t.stroke(w),t.strokeWeight(2),c.length>=10&&F(c,"CLOSE")}function M(t,o){l=t.width,u=t.height,t.colorMode(t.HSB),V(o),A(t)}function k(t){t.translate(l/2,u/2),t.background("rgba(0, 0, 0, 0.07)"),f&&(I(),v(t))}return(t,o)=>(q(),W("div",J,[m(O,{class:"ac","audio-src":j(R),"fft-size":p.value,onInitAudioAnalyser:y},null,8,["audio-src","fft-size"]),m(L,{setup:M,draw:k})]))}});const tt=G(K,[["__scopeId","data-v-048be9ba"]]);export{tt as default};
