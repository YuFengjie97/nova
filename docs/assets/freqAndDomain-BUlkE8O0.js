var I=Object.defineProperty;var P=(c,n,r)=>n in c?I(c,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[n]=r;var o=(c,n,r)=>(P(c,typeof n!="symbol"?n+"":n,r),r);import{c as Y}from"./chroma-DCKfFEcf.js";import{a as E}from"./simplex-noise-BtZ5wMFy.js";import{i as R}from"./audio2-Bh-ajUVZ.js";import{m as z}from"./audio-sugarCrush-1d8eZUIK.js";import{i as M}from"./initStats-C5VNgmNK.js";import{d as N,r as A,h as $,b as U,e as k,t as V,o as j,_ as G}from"./index-Ct6ceUkE.js";import"./_commonjsHelpers-BosuxZz1.js";const d=800,p=32,H=10,B=100,J=N({__name:"freqAndDomain",setup(c){E();const{min:n,max:r,PI:K,sin:L,cos:O,atan:Q,random:W,abs:X,sqrt:Z,floor:tt}=Math,f=A(),l=A();let i;const q=["#d63031","#81ecec","#fdcb6e"];Y.scale(q);const y=new Uint8Array(p/2),m=new Float32Array(p);let u;const{audio:v,getAnalyser:b}=R(z,p),x=A(!1);function C(){v.paused?(v.play(),x.value=!0,u=b().analyser):(v.pause(),x.value=!1)}class F{constructor(t,e){o(this,"x",0);o(this,"y",0);o(this,"xt",0);o(this,"yt",0);this.x=t,this.y=e,this.xt=t,this.yt=e}updateYT(t){this.yt=t}update(){this.x+=(this.xt-this.x)*.1,this.y+=(this.yt-this.y)*.1}}class g{constructor(t,e){o(this,"points",[]);o(this,"yBase",0);o(this,"type","f");const s=e==="d"?p:p/2;this.points=Array.from({length:s}).map((a,D)=>new F(D*(d/s),t)),this.type=e,this.yBase=t}update(){this.points.forEach(t=>t.update())}updateT(){this.points.forEach((t,e)=>{if(this.type==="f"){const s=-y[e]/255*B+this.yBase;t.updateYT(s)}if(this.type==="d"){const s=m[e]*B+this.yBase;t.updateYT(s)}if(this.type==="fd"){const s=-y[e]/255,a=m[e],S=s*a*B+this.yBase;t.updateYT(S)}})}draw(){i.beginPath();for(let t=0;t<this.points.length-1;t++){const e=this.points[t],s=this.points[t+1],a={x:(e.x+s.x)/2,y:(e.y+s.y)/2};t===0?i.moveTo(a.x,a.y):i.quadraticCurveTo(e.x,e.y,a.x,a.y)}i.stroke()}}const w=new g(300,"f"),_=new g(500,"d"),T=new g(700,"fd");return $(()=>{const{stats:h}=M(f.value),{width:t,height:e}=f.value.getBoundingClientRect(),s=n(t,e);l.value.width=d,l.value.height=d,l.value.style.cssText=`width:${s}px;height:${s}px`,i=l.value.getContext("2d"),i.strokeStyle="#fff";function a(){h.update(),i.clearRect(0,0,d,d),w.update(),_.update(),T.update(),w.draw(),_.draw(),T.draw(),requestAnimationFrame(a)}a(),setInterval(()=>{u&&u.getFloatTimeDomainData(m),u&&u.getByteFrequencyData(y),w.updateT(),_.updateT(),T.updateT()},H)}),(h,t)=>(j(),U("div",{ref_key:"con",ref:f,class:"con w-full h-full bg-#000"},[k("div",{class:"bt",onClick:C},V(x.value?"pause":"play"),1),k("canvas",{ref_key:"canvas",ref:l,class:"canvas",width:"400",height:"400"},null,512)],512))}}),lt=G(J,[["__scopeId","data-v-922ea979"]]);export{lt as default};
