import{f as n}from"./fabric-7ZMa6wlx.js";import{C as M}from"./Card-D76Pik8w.js";import{n as N}from"./noise-CqzBSU_F.js";import"./p5.min-WfQBoNak.js";import{d as S,r as A,C as V,j as z,e as E,q as G,s as T,f as B,o as U,_ as v}from"./index-CqfaNC88.js";const J={class:"flowField"},c=50,K=.3,O=.3,P=8e-4,Q=360,Z=S({__name:"FlowField",setup($){const{ceil:p}=Math,w=A(),m=A(),_=[];let e=null,a=0,d=0,F=0,f=0,b=0;class I{constructor(t,i){this.angle=45,this.originRadius=4,this.lineWidth=2,this.borderWidth=1,this.triangleWidth=10,this.triangleHeight=14,this.arrowColor="#e74c3c",this.position=t,this.size=i;const{angle:r,lineWidth:h,borderWidth:g,arrowColor:u,originRadius:Y,triangleWidth:H,triangleHeight:k,position:{x:l,y:s}}=this,j=new n.fabric.Rect({left:l,top:s,width:i,height:i,stroke:"#3498db",strokeWidth:g,fill:"#fff"});e==null||e.add(j);const q=new n.fabric.Circle({originX:"center",originY:"center",top:s,left:l,radius:Y,fill:u});e==null||e.add(q);const W=i*.7+l,y=s,D=new n.fabric.Line([l,s,W,y],{originX:"left",originY:"center",stroke:u,strokeWidth:h,strokeLineCap:"round"}),L=new n.fabric.Triangle({originX:"center",originY:"top",top:y,left:W+k,width:H,height:k,fill:u,angle:90});this.group=new n.fabric.Group([D,L],{top:s,left:l,angle:r,originX:"left",originY:"center"}),e==null||e.add(this.group)}updateAngle(t){this.group.set("angle",t)}}function R(){for(let o=0;o<d;o+=c)for(let t=0;t<a;t+=c)_.push(new I({x:t,y:o},c))}function X(){let o=0;for(let t=0;t<F;t++){o+=K,b+=P;let i=0;for(let r=0;r<f;r++){i+=O;const h=N(o,i,b)*Q,g=r+t*f;_[g].updateAngle(h)}}e==null||e.renderAll()}let C=0;function x(){X(),C=requestAnimationFrame(x),e==null||e.renderAll()}return V(()=>{cancelAnimationFrame(C)}),z(()=>{var i;const{width:o,height:t}=(i=w.value)==null?void 0:i.getBoundingClientRect();a=o,d=t,f=p(a/c),F=p(d/c),e=new n.fabric.StaticCanvas(m.value,{width:a,height:d,backgroundColor:"#3498db"}),R(),x()}),(o,t)=>(U(),E("div",J,[G(M,{class:"card"},{default:T(()=>[B("div",{ref_key:"con",ref:w,class:"con"},[B("canvas",{ref_key:"canvasDom",ref:m},null,512)],512)]),_:1})]))}}),re=v(Z,[["__scopeId","data-v-a3c437aa"]]);export{re as default};
