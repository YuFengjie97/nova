var $=Object.defineProperty;var A=(a,o,l)=>o in a?$(a,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[o]=l;var r=(a,o,l)=>(A(a,typeof o!="symbol"?o+"":o,l),l);import{d as C,y as D,z as G,c as L,o as z,q,s as E,a as g,_ as b,b as y,e as P}from"./index.78dc058f.js";import{P as F}from"./P5.29f25bf7.js";import{p as _}from"./p5.min.64848d7f.js";import{G as H}from"./dat.gui.module.5aaed78b.js";const k=a=>(q("data-v-a82a1169"),a=a(),E(),a),M={class:"loading"},O=k(()=>g("div",{class:"mask"},null,-1)),W=k(()=>g("div",{class:"loader"},[g("div",{class:"ring"})],-1)),J=[O,W],K=C({__name:"Loading",props:{isLoading:{type:Boolean,default:!1},type:{default:0}},setup(a){return(o,l)=>D((z(),L("div",M,J,512)),[[G,a.isLoading]])}});const Q=b(K,[["__scopeId","data-v-a82a1169"]]),I="/nova/assets/test.142d7de0.jpg",T={class:"viewCon"},X=C({__name:"PixelPicture",setup(a){const{min:o}=Math,l=y(!1);let t,w=I,p,h,d={sampleNum:20,isCircle:!1,importImg:function(){var s;(s=m.value)==null||s.click()},downloadImg:function(){t.saveCanvas()}},u=[];const m=y();function S(){if(m.value){let s=m.value.files[0];w=URL.createObjectURL(s),x(w)}}const f=new H({width:300});f.add(d,"sampleNum",10,100,1).name("sampleNum").onFinishChange(function(s){x(w)}),f.add(d,"isCircle").name("ShowCircle"),f.add(d,"importImg").name("LoadLocalImg").listen(),f.add(d,"downloadImg").name("DownLoad").listen();class N{constructor(e,i,n){r(this,"pos");r(this,"tarPos");r(this,"vel",new _.Vector(0,0));r(this,"color");r(this,"size");this.tarPos=e,this.pos=new _.Vector(t.random(0,p),t.random(0,h)),this.color=i,this.size=n}show(){t.noStroke(),t.fill(this.color),d.isCircle?t.circle(this.pos.x,this.pos.y,this.size):t.rect(this.pos.x,this.pos.y,this.size,this.size)}update(){let e=_.Vector.dist(this.pos,this.tarPos),i=_.Vector.sub(this.tarPos,this.pos),n=t.map(e,0,50,.08,.3,!0);i.mult(n),this.vel.set(i),this.pos.add(this.vel)}}function V(s,e){let i=600,n=600,c=s/e;c>1?n=i/c:i=n*c,p=i,h=n,t.createCanvas(p,h)}function x(s){l.value=!0,t.loadImage(s,e=>{V(e.width,e.height);let i=o(e.width,e.height)/d.sampleNum,n=o(p,h)/d.sampleNum;u.length=0,e.loadPixels();for(let c=0;c<e.height;c+=i)for(let v=0;v<e.width;v+=i){let B=e.get(v,c),U=v/e.width*p,R=c/e.height*h;u.push(new N(new _.Vector(U,R),B,n))}l.value=!1})}function j(s){t=s,t.setup=function(){x(I)},t.draw=function(){t.background(51);for(let e=u.length-1;e>=0;e--)u[e].update(),u[e].show()}}return(s,e)=>(z(),L("div",T,[g("input",{onChange:S,ref_key:"file",ref:m,type:"file",accept:"image/png, image/jpeg, image/jpg",style:{display:"none"}},null,544),P(F,{sketch:j}),P(Q,{"is-loading":l.value},null,8,["is-loading"])]))}});const ae=b(X,[["__scopeId","data-v-cabb3c6c"]]);export{ae as default};
