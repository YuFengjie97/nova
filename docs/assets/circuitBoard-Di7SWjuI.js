import{d as S,r as N,j as O,e as L,o as z}from"./index-CqfaNC88.js";const F=S({__name:"circuitBoard",setup(T){const{floor:$,random:g}=Math,_=N(),v=N(),r={size:20,wireMaxLen:40,stroke:"#ff9f43",fill:"#b2bec3",blank:"#10ac84",straightness:2};return O(()=>{const{width:y,height:m}=_.value.getBoundingClientRect();v.value.setAttribute("width",`${y}`),v.value.setAttribute("height",`${m}`);const k=$(m/r.size),x=$(y/r.size);let A=$(k*x);const w=[],o={},C=[],M=[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]];class B{constructor(t,s){this.x=0,this.y=0,this.available=!0,this.dirInd=$(g()*M.length),this.x=t,this.y=s}}class E{constructor(t){this.cells=[],t.available=!1,this.cells.push(t),A-=1}validNoCrossOver(t,s){var l,h,e,a,f,i,d,p;if([0,2,4,6].includes(s))return!0;if(s===1){const c=((l=o[`${t.x},${t.y-1}`])==null?void 0:l.available)??!0,n=((h=o[`${t.x+1},${t.y}`])==null?void 0:h.available)??!0;if(c&&n)return!0}if(s===3){const c=((e=o[`${t.x+1},${t.y}`])==null?void 0:e.available)??!0,n=((a=o[`${t.x},${t.y+1}`])==null?void 0:a.available)??!0;if(c&&n)return!0}if(s===5){const c=((f=o[`${t.x-1},${t.y}`])==null?void 0:f.available)??!0,n=((i=o[`${t.x},${t.y+1}`])==null?void 0:i.available)??!0;if(c&&n)return!0}if(s===7){const c=((d=o[`${t.x-1},${t.y}`])==null?void 0:d.available)??!0,n=((p=o[`${t.x},${t.y-1}`])==null?void 0:p.available)??!0;if(c&&n)return!0}return!1}generate(){for(;this.cells.length<r.wireMaxLen;){const t=this.cells[this.cells.length-1],s=g()<.5?[0,1,-1]:[0,-1,1];for(;s.length>0;){let l=t.dirInd+s.splice($(g()**r.straightness*s.length),1)[0];l=l<0?8+l:l%8;const h=M[l],e=t.x+h[0],a=t.y+h[1],f=a*x+e,i=f>=0&&f<w.length?w[f]:!1;if(!(e<0||e>=x||a<0||a>=k||!i||!i.available||!this.validNoCrossOver(t,l))){i.available=!1,i.dirInd=l,A-=1,this.cells.push(i);break}}if(s.length===0)break}}draw(){var d,p,c;const t=document.createElementNS("http://www.w3.org/2000/svg","path"),s=document.createElementNS("http://www.w3.org/2000/svg","circle"),l=document.createElementNS("http://www.w3.org/2000/svg","circle");let h="";const e=r.size,a=g()*(e/6)+e/6;s.setAttribute("r",`${a}`),l.setAttribute("r",`${a}`),s.setAttribute("stroke","#fff"),l.setAttribute("stroke","#fff");const f=g()>.5;s.setAttribute("fill",f?r.fill:r.blank),l.setAttribute("fill",f?r.fill:r.blank);for(let n=0;n<this.cells.length;n+=1){const b=this.cells[n];n===0&&(h+=`M ${b.x*e+e/2} ${b.y*e+e/2}`,s.setAttribute("cx",`${b.x*e+e/2}`),s.setAttribute("cy",`${b.y*e+e/2}`)),n<this.cells.length&&(h+=` L ${b.x*e+e/2} ${b.y*e+e/2}`),n===this.cells.length-1&&(l.setAttribute("cx",`${b.x*e+e/2}`),l.setAttribute("cy",`${b.y*e+e/2}`))}t.setAttribute("d",h),t.setAttribute("fill","none"),t.setAttribute("stroke",r.stroke),t.setAttribute("stroke-width",`${a*2}`);const i=t.getTotalLength();t.style.cssText=`--len: ${i}; --len-1:${-i}; --len-3:${-3*i}`,t.classList.add(g()>.5?"animated-path-once":"animated-path-repeat"),(d=v.value)==null||d.append(t),(p=v.value)==null||p.append(s),(c=v.value)==null||c.append(l)}}for(let u=0;u<k;u+=1)for(let t=0;t<x;t+=1){const s=new B(t,u);w.push(s),o[`${t},${u}`]=s}for(;C.length<A;){const u=w[$(g()*w.length)];if(!u.available)continue;const t=new E(u);C.push(t),t.generate(),t.draw()}}),(y,m)=>(z(),L("div",{ref_key:"con",ref:_,class:"w-full h-full bg-#10ac84"},[(z(),L("svg",{ref_key:"svgCon",ref:v,class:"block",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},null,512))],512))}});export{F as default};
