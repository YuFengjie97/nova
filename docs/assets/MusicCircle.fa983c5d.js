var D=Object.defineProperty;var S=(n,s,r)=>s in n?D(n,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[s]=r;var a=(n,s,r)=>(S(n,typeof s!="symbol"?s+"":s,r),r);import{p as E}from"./p5.min.c2b8c1b1.js";import{P as L}from"./P5Con.4f36b4fe.js";import{A as O,a as R,i as V,n as F}from"./p5bezier.b1b9c082.js";import{g as H}from"./math.c1d1c73e.js";import{d as N,b as T,c as W,e as m,u as j,o as q,_ as G}from"./index.dd42b8fd.js";const J={class:"viewCon"},K=N({__name:"MusicCircle",setup(n){const{PI:s,random:r,floor:g,min:x}=Math;let l,u;const p=T(64),d=p.value/2,_=[],c=[];let f,P=250,h=100,w=.9,C="#5f27cd";class y{constructor(o,e,i){a(this,"$p");a(this,"angle");a(this,"basePos");a(this,"pos");a(this,"r",2);a(this,"audioIndex",0);a(this,"h",0);a(this,"count",0);this.$p=o,this.angle=e,this.basePos=E.Vector.fromAngle(e,x(l,u)/2*w),this.pos=this.basePos.copy(),this.audioIndex=i}draw(){const{$p:o,pos:{x:e,y:i},h:z,count:B}=this;o.noStroke(),o.fill((z+B)%255,255,127),o.circle(e,i,this.r*2)}update(o){this.pos=this.basePos.copy().mult(o),this.h=g(o*255),this.count++}}function A(t){f=t}function I(t){var e;let o=H(d);for(let i=0;i<d;i++)_.push(new y(t,s*2/d*i,(e=o())!=null?e:0))}function b(){const t=f.getAudioData();c.length=0,_.forEach(o=>{let e=t[o.audioIndex],i=e<h?h:e;o.update(i/P),o.draw(),e>h&&c.push([o.pos.x,o.pos.y])})}function v(t){t.noFill(),t.stroke(C),t.strokeWeight(2),c.length>=10&&F(c,"CLOSE")}function M(t,o){l=t.width,u=t.height,t.colorMode(t.HSB),V(o),I(t)}function k(t){t.translate(l/2,u/2),t.background("rgba(0, 0, 0, 0.07)"),f&&(b(),v(t))}return(t,o)=>(q(),W("div",J,[m(O,{class:"ac","audio-src":j(R),"fft-size":p.value,onInitAudioAnalyser:A},null,8,["audio-src","fft-size"]),m(L,{setup:M,draw:k})]))}});const tt=G(K,[["__scopeId","data-v-e85f65e1"]]);export{tt as default};
