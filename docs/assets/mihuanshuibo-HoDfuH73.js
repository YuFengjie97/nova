var O=Object.defineProperty;var Q=(l,s,c)=>s in l?O(l,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[s]=c;var i=(l,s,c)=>(Q(l,typeof s!="symbol"?s+"":s,c),c);import{a as U}from"./simplex-noise-CoJLqHZY.js";import{a as X}from"./audio-sugarCrush-b-otqC__.js";import{i as Y}from"./initStats-pfzflCcv.js";import{d as Z,r as y,h as tt,o as et,b as at,e as M,t as st,_ as nt}from"./index-Qb02CAS_.js";function ot(l,s=512){const c=document.createElement("audio");c.src=l;function v(){const u=new window.AudioContext,f=u.createMediaElementSource(c),m=u.createAnalyser();return m.fftSize=s,f.connect(m),f.connect(u.destination),{analyser:m}}return{audio:c,getAnalyser:v}}const it=Z({__name:"mihuanshuibo",setup(l){U();const{min:s,max:c,PI:v,sin:u,cos:f,atan:m,random:ct,abs:rt,sqrt:R,floor:V}=Math,C=v*2,x=y(!1),D=y(()=>{}),B=y(()=>{});function $(){x.value?B.value():D.value()}const g=y(),d=y(),n=800,G=n*.2,h=32,L=V(h/2),k=n*.2,W=100;return tt(()=>{const{width:b,height:P}=g.value.getBoundingClientRect(),{stats:j}=Y(g.value),E=`${s(b,P)}px`;d.value.style.width=E,d.value.style.height=E,d.value.width=n,d.value.height=n;const o=d.value.getContext("2d");o.strokeStyle="#fff",o.lineWidth=2,o.translate(n/2,n/2);const{audio:w,getAnalyser:H}=ot(X,h);let T=!1,q;const I=new Float32Array(h);class J{constructor(t,e,a){i(this,"i",0);i(this,"angle",0);i(this,"xBase",0);i(this,"yBase",0);i(this,"x",0);i(this,"y",0);i(this,"dx",0);i(this,"dy",0);this.i=t,this.angle=t/h*C,this.x=e,this.y=a,this.xBase=e,this.yBase=a}updateD(){const t=I[this.i];performance.now()/1e3;const e=t*(this.i%L===0?k*1.4:k),a=f(this.angle)*e,r=u(this.angle)*e;this.dx=a,this.dy=r}update(){const t=this.xBase+this.dx,e=this.yBase+this.dy;this.x+=(t-this.x)*.1,this.y+=(e-this.y)*.1}}class K{constructor(t){i(this,"points");i(this,"gradientDist",n/2);this.points=t}updateD(){this.points.forEach(t=>t.updateD())}update(){this.points.forEach((t,e)=>{e===10&&(this.gradientDist=R(t.x**2+t.y**2)),t.update()})}drawShape(){let t=0,e=0;for(let r=0;r<this.points.length;r++){const p=this.points[r],F=r===this.points.length-1?this.points[0]:this.points[r+1],S=(p.x+F.x)/2,A=(p.y+F.y)/2;r===0?(o.beginPath(),o.moveTo(S,A),t=S,e=A):o.quadraticCurveTo(p.x,p.y,S,A)}o.quadraticCurveTo(this.points[0].x,this.points[0].y,t,e);const a=o.createRadialGradient(0,0,0,0,0,this.gradientDist);a.addColorStop(0,"#fd79a8"),a.addColorStop(.5,"#81ecec"),a.addColorStop(1,"#ff7675"),o.fillStyle=a,o.fill()}draw(){this.drawShape()}}const _=new K(Array.from({length:h}).map((z,t)=>{const e=t/h*C,a=G,r=f(e)*a,p=u(e)*a;return new J(t,r,p)}));function N(){j.update(),o.clearRect(-n/2,-n/2,n,n),_.update(),_.draw(),requestAnimationFrame(N)}N(),D.value=()=>{w.paused&&(w.play(),x.value=!0,!T&&(q=H().analyser,T=!0,setInterval(()=>{q.getFloatTimeDomainData(I),_.updateD()},W)))},B.value=()=>{w.pause(),x.value=!1}}),(b,P)=>(et(),at("div",{ref_key:"con",ref:g,class:"con w-full h-full bg-#000"},[M("div",{class:"bt",onClick:$},st(x.value?"pause":"play"),1),M("canvas",{ref_key:"canvas",ref:d,class:"canvas",width:"400",height:"400"},null,512)],512))}}),yt=nt(it,[["__scopeId","data-v-2abd7067"]]);export{yt as default};
