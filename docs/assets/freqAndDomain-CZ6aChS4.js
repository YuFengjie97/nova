import{c as F}from"./index-T8xJO8QF.js";import{a as S}from"./simplex-noise-BkggsaiG.js";import{i as b}from"./audio2-Bh-ajUVZ.js";import{m as Y}from"./audio-sugarCrush-1d8eZUIK.js";import{d as E,r as g,j as I,H as P,e as R,f as T,t as z,o as M,_ as N}from"./index-CqfaNC88.js";const c=800,r=32,$=10,w=100,j=E({__name:"freqAndDomain",setup(H){S();const{min:A}=Math,l=g(),o=g();let n;const B=["#d63031","#81ecec","#fdcb6e"];F.scale(B);const u=new Uint8Array(r/2),d=new Float32Array(r);let i;const{audio:p,getAnalyser:D}=b(Y,r),f=g(!1);function k(){p.paused?(p.play(),f.value=!0,i=D().analyser):(p.pause(),f.value=!1)}class q{constructor(t,e){this.x=0,this.y=0,this.xt=0,this.yt=0,this.x=t,this.y=e,this.xt=t,this.yt=e}updateYT(t){this.yt=t}update(){this.x+=(this.xt-this.x)*.1,this.y+=(this.yt-this.y)*.1}}class y{constructor(t,e){this.points=[],this.yBase=0,this.type="f";const s=e==="d"?r:r/2;this.points=Array.from({length:s}).map((a,_)=>new q(_*(c/s),t)),this.type=e,this.yBase=t}update(){this.points.forEach(t=>t.update())}updateT(){this.points.forEach((t,e)=>{if(this.type==="f"){const s=-u[e]/255*w+this.yBase;t.updateYT(s)}if(this.type==="d"){const s=d[e]*w+this.yBase;t.updateYT(s)}if(this.type==="fd"){const s=-u[e]/255,a=d[e],C=s*a*w+this.yBase;t.updateYT(C)}})}draw(){n.beginPath();for(let t=0;t<this.points.length-1;t++){const e=this.points[t],s=this.points[t+1],a={x:(e.x+s.x)/2,y:(e.y+s.y)/2};t===0?n.moveTo(a.x,a.y):n.quadraticCurveTo(e.x,e.y,a.x,a.y)}n.stroke()}}const m=new y(300,"f"),v=new y(500,"d"),x=new y(700,"fd");return I(()=>{const{stats:h}=P(l.value),{width:t,height:e}=l.value.getBoundingClientRect(),s=A(t,e);o.value.width=c,o.value.height=c,o.value.style.cssText=`width:${s}px;height:${s}px`,n=o.value.getContext("2d"),n.strokeStyle="#fff";function a(){h.update(),n.clearRect(0,0,c,c),m.update(),v.update(),x.update(),m.draw(),v.draw(),x.draw(),requestAnimationFrame(a)}a(),setInterval(()=>{i&&i.getFloatTimeDomainData(d),i&&i.getByteFrequencyData(u),m.updateT(),v.updateT(),x.updateT()},$)}),(h,t)=>(M(),R("div",{ref_key:"con",ref:l,class:"con w-full h-full bg-#000"},[T("div",{class:"bt",onClick:k},z(f.value?"pause":"play"),1),T("canvas",{ref_key:"canvas",ref:o,class:"canvas",width:"400",height:"400"},null,512)],512))}}),L=N(j,[["__scopeId","data-v-922ea979"]]);export{L as default};
