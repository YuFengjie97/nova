import{c as M}from"./index-T8xJO8QF.js";import{a as N}from"./simplex-noise-BkggsaiG.js";import{i as V}from"./audio2-Bh-ajUVZ.js";import{m as $}from"./audio-sugarCrush-1d8eZUIK.js";import{d as j,r as g,j as H,H as U,e as G,f as S,t as J,o as K,_ as L}from"./index-CqfaNC88.js";import"./p5.min-WfQBoNak.js";import{l as u}from"./math-Cm0Zo__g.js";const i=800,c=20,k=512,O=100,Q=j({__name:"rect",setup(W){const C=N(),{min:b,PI:D}=Math,I=D*2,f=g(),n=g();let s;const p=i/c,x=i/c,d=k/2,P=["#d63031","#81ecec","#fdcb6e"],R=M.scale(P),_=new Uint8Array(d);let h;const{audio:m,getAnalyser:T}=V($,k),y=g(!1);function A(r){return _[r]}function q(){m.paused?(m.play(),y.value=!0,h||(h=T().analyser)):(m.pause(),y.value=!1)}class z{constructor(e,o,t){this.color=.1,this.colort=.2,this.x=0,this.y=0,this.musicVal=0,this.w=1,this.h=1,this.wt=1,this.ht=1,this.a=0,this.at=0,this.x=e,this.y=o,this.color=t,this.colort=t}updateTarget(){const e=A(this.x%d),o=A(this.y%d),t=C(e/x,o/p)*.5+.5;this.wt=t,this.ht=t,this.colort=t,this.at=t}update(){this.w=u(this.w,this.wt,.1),this.h=u(this.h,this.ht,.1),this.color=u(this.color,this.colort,.1),this.a=u(this.a,this.at,.1)}draw(){s.save(),s.beginPath(),s.fillStyle=R(this.color).css();const e=this.w*c,o=this.h*c,t=this.x*c+c/2,w=this.y*c+c/2;s.translate(t,w),s.rotate(this.a*I),s.fillRect(-e/2,-o/2,e,o),s.restore()}}const v=[];return H(()=>{const{stats:r}=U(f.value),{width:e,height:o}=f.value.getBoundingClientRect(),t=b(e,o);n.value.width=i,n.value.height=i,n.value.style.cssText=`width:${t}px;height:${t}px`,s=n.value.getContext("2d");function w(){for(let a=0;a<x;a+=1)for(let l=0;l<p;l+=1){const E=(a+l)/(p*2),F=new z(a,l,E);v.push(F)}}w();function B(){s.clearRect(0,0,i,i),r.update(),v.forEach(a=>{a.update(),a.draw()}),requestAnimationFrame(B)}B(),setInterval(()=>{h&&h.getByteFrequencyData(_),v.forEach(a=>a.updateTarget())},O)}),(r,e)=>(K(),G("div",{ref_key:"con",ref:f,class:"con w-full h-full bg-#000"},[S("div",{class:"bt",onClick:q},J(y.value?"pause":"play"),1),S("canvas",{ref_key:"canvas",ref:n,class:"canvas",width:"400",height:"400"},null,512)],512))}}),ot=L(Q,[["__scopeId","data-v-5cec969a"]]);export{ot as default};
