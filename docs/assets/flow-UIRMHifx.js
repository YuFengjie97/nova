var G=Object.defineProperty;var L=(x,d,r)=>d in x?G(x,d,{enumerable:!0,configurable:!0,writable:!0,value:r}):x[d]=r;var O=(x,d,r)=>(L(x,typeof d!="symbol"?d+"":d,r),r);import{p as I}from"./p5.min-yLIrP2i3.js";import{c as N}from"./simplex-noise-Sr2aaxRX.js";import{u as V}from"./useGUI-7eNpPIRv.js";import{y as j,z as F,d as W,b,x as q,e as H,o as U,c as X,a as Y}from"./index-mZy-ryn_.js";import{m as M}from"./math-iY9w5Tob.js";import"./dat.gui.module-PWGADmkp.js";var k={exports:{}};(function(x,d){(function(r,h){x.exports=h()})(j,function(){var r=function(){function h(o){return i.appendChild(o.dom),o}function p(o){for(var s=0;s<i.children.length;s++)i.children[s].style.display=s===o?"block":"none";m=o}var m=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(o){o.preventDefault(),p(++m%i.children.length)},!1);var c=(performance||Date).now(),u=c,t=0,w=h(new r.Panel("FPS","#0ff","#002")),l=h(new r.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var C=h(new r.Panel("MB","#f08","#201"));return p(0),{REVISION:16,dom:i,addPanel:h,showPanel:p,begin:function(){c=(performance||Date).now()},end:function(){t++;var o=(performance||Date).now();if(l.update(o-c,200),o>u+1e3&&(w.update(1e3*t/(o-u),100),u=o,t=0,C)){var s=performance.memory;C.update(s.usedJSHeapSize/1048576,s.jsHeapSizeLimit/1048576)}return o},update:function(){c=this.end()},domElement:i,setMode:p}};return r.Panel=function(h,p,m){var i=1/0,c=0,u=Math.round,t=u(window.devicePixelRatio||1),w=80*t,l=48*t,C=3*t,o=2*t,s=3*t,g=15*t,y=74*t,v=30*t,f=document.createElement("canvas");f.width=w,f.height=l,f.style.cssText="width:80px;height:48px";var a=f.getContext("2d");return a.font="bold "+9*t+"px Helvetica,Arial,sans-serif",a.textBaseline="top",a.fillStyle=m,a.fillRect(0,0,w,l),a.fillStyle=p,a.fillText(h,C,o),a.fillRect(s,g,y,v),a.fillStyle=m,a.globalAlpha=.9,a.fillRect(s,g,y,v),{dom:f,update:function(S,z){i=Math.min(i,S),c=Math.max(c,S),a.fillStyle=m,a.globalAlpha=1,a.fillRect(0,0,w,g),a.fillStyle=p,a.fillText(u(S)+" "+h+" ("+u(i)+"-"+u(c)+")",C,o),a.drawImage(f,s+t,g,y-t,v,s,g,y-t,v),a.fillRect(s+y-t,g,t,v),a.fillStyle=m,a.globalAlpha=.9,a.fillRect(s+y-t,g,t,u((1-S/z)*v))}}},r})})(k);var Z=k.exports;const $=F(Z);function J(x){const d=new $;return x.append(d.dom),{stats:d}}const oe=W({__name:"flow",setup(x){const d=N(),r=b(),h=b();let p=300,m=360,i=10,c=30,u=i*10,t=0,w=0,l,C=0,o=0,s=.001,g=.001,y=.004,v=!1;const f={hueBase:p,hueRange:m,lineWidth:i,cellSize:c,lineLen:u,xInc:s,yInc:g,zInc:y,isGlow:v};let a=0;return q(()=>{cancelAnimationFrame(a)}),H(()=>{function S(){const{width:n,height:e}=r.value.getBoundingClientRect();t=n,w=e,h.value.width=n,h.value.height=e,l=h.value.getContext("2d"),C=Math.ceil(e/c),o=Math.ceil(n/c),l.lineCap="round",l.lineWidth=i}S();const z=[];function B(){let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{S(),z.length=0,R()},700)}}window.addEventListener("resize",B());function P(){const{gui:n}=V(r.value);n.add(f,"hueBase",1,360,1).onChange(e=>p=e),n.add(f,"hueRange",1,360,1).onChange(e=>m=e),n.add(f,"isGlow").name("isGlow(laggy)").onChange(e=>v=e),n.add(f,"cellSize",10,60,1).name("cellSize(careful)").onChange(e=>{c=e,z.length=0,C=Math.ceil(w/c),o=Math.ceil(t/c),R()}),n.add(f,"lineWidth",1,20,1).onChange(e=>{i=e,l.lineWidth=i}),n.add(f,"lineLen",1,200,1).onChange(e=>u=e),n.add(f,"xInc",.001,.01,.001).onChange(e=>s=e),n.add(f,"yInc",.001,.01,.001).onChange(e=>g=e),n.add(f,"zInc",.001,.01,.001).onChange(e=>y=e)}P();class T{constructor(e){O(this,"end",new I.Vector(0,0));O(this,"pos");O(this,"hue",0);O(this,"xOff",0);O(this,"yOff",0);O(this,"zOff",0);this.pos=e,this.xOff=M(e.x,0,t,0,1),this.yOff=M(e.y,0,t,0,1),this.zOff=M(Math.sqrt(this.xOff+this.yOff),0,2,0,1)}draw(){l.beginPath(),l.moveTo(this.pos.x,this.pos.y),l.lineTo(this.end.x,this.end.y);const{hsl:e,grad:E}=this.getColor();l.strokeStyle=E,v?(l.shadowColor=e,l.shadowBlur=i/2):l.shadowBlur=0,l.stroke()}getColor(){this.hue=Math.floor(M(this.getNoiseXYZ(),-1,1,p-m,p+m));const e=l.createLinearGradient(this.pos.x,this.pos.y,this.end.x,this.end.y);return e.addColorStop(0,`hsla(${this.hue}, 100%, 50%, 0)`),e.addColorStop(1,`hsla(${this.hue}, 100%, 50%, 1)`),{hsl:`hsla(${this.hue}, 100%, 50%, 1)`,grad:e}}getNoiseXYZ(){return d(this.xOff,this.yOff,this.zOff)}update(){const e=this.getNoiseXYZ(),E=M(e,-1,1,0,Math.PI*4),D=M(e,-1,1,.1,u);this.end=this.pos.copy().add(I.Vector.fromAngle(E,D)),this.xOff+=s,this.yOff+=g,this.zOff+=y}}function R(){for(let n=0;n<o;n++)for(let e=0;e<C;e++)z.push(new T(new I.Vector(n*c,e*c)))}const{stats:A}=J(r.value);function _(){A.update(),l.clearRect(0,0,t,w),l.fillStyle="rgba(0,0,0,1)",l.fillRect(0,0,t,w),z.forEach(n=>{n.update(),n.draw()}),a=requestAnimationFrame(_)}R(),_()}),(S,z)=>(U(),X("div",{ref_key:"con",ref:r,class:"h-100vh w-full"},[Y("canvas",{ref_key:"canvas",ref:h,class:"h-full w-full block"},null,512)],512))}});export{oe as default};
