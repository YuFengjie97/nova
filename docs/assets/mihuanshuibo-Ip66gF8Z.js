var K=Object.defineProperty;var O=(l,c,r)=>c in l?K(l,c,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[c]=r;var o=(l,c,r)=>(O(l,typeof c!="symbol"?c+"":c,r),r);import{a as Q}from"./simplex-noise-CoJLqHZY.js";import{m as U}from"./audio-sugarCrush-sMDL0Z2H.js";import{i as X}from"./audio2-GAo0SpJu.js";import{i as Y}from"./initStats-ly1d5gdj.js";import{d as Z,r as p,h as tt,o as st,b as at,e as F,t as et,_ as nt}from"./index-cP8reCTr.js";const ot=Z({__name:"mihuanshuibo",setup(l){Q();const{min:c,max:r,PI:R,sin:_,cos:w,atan:it,random:ct,abs:lt,sqrt:z,floor:M}=Math,D=R*2,f=p(!1),S=p(()=>{}),B=p(()=>{});function V(){f.value?B.value():S.value()}const y=p(),h=p(),e=800,G=e*.2,d=32,L=M(d/2),k=e*.2,W=100;return tt(()=>{const{width:C,height:b}=y.value.getBoundingClientRect(),{stats:$}=Y(y.value),A=`${c(C,b)}px`;h.value.style.width=A,h.value.style.height=A,h.value.width=e,h.value.height=e;const n=h.value.getContext("2d");n.strokeStyle="#fff",n.lineWidth=2,n.translate(e/2,e/2);const{audio:m,getAnalyser:j}=X(U,d);let P=!1,T;const q=new Float32Array(d);class H{constructor(t,s,a){o(this,"i",0);o(this,"angle",0);o(this,"xBase",0);o(this,"yBase",0);o(this,"x",0);o(this,"y",0);o(this,"dx",0);o(this,"dy",0);this.i=t,this.angle=t/d*D,this.x=s,this.y=a,this.xBase=s,this.yBase=a}updateD(){const t=q[this.i];performance.now()/1e3;const s=t*(this.i%L===0?k*1.4:k),a=w(this.angle)*s,i=_(this.angle)*s;this.dx=a,this.dy=i}update(){const t=this.xBase+this.dx,s=this.yBase+this.dy;this.x+=(t-this.x)*.1,this.y+=(s-this.y)*.1}}class J{constructor(t){o(this,"points");o(this,"gradientDist",e/2);this.points=t}updateD(){this.points.forEach(t=>t.updateD())}update(){this.points.forEach((t,s)=>{s===10&&(this.gradientDist=z(t.x**2+t.y**2)),t.update()})}drawShape(){let t=0,s=0;for(let i=0;i<this.points.length;i++){const u=this.points[i],E=i===this.points.length-1?this.points[0]:this.points[i+1],x=(u.x+E.x)/2,g=(u.y+E.y)/2;i===0?(n.beginPath(),n.moveTo(x,g),t=x,s=g):n.quadraticCurveTo(u.x,u.y,x,g)}n.quadraticCurveTo(this.points[0].x,this.points[0].y,t,s);const a=n.createRadialGradient(0,0,0,0,0,this.gradientDist);a.addColorStop(0,"#fd79a8"),a.addColorStop(.5,"#81ecec"),a.addColorStop(1,"#ff7675"),n.fillStyle=a,n.fill()}draw(){this.drawShape()}}const v=new J(Array.from({length:d}).map((N,t)=>{const s=t/d*D,a=G,i=w(s)*a,u=_(s)*a;return new H(t,i,u)}));function I(){$.update(),n.clearRect(-e/2,-e/2,e,e),v.update(),v.draw(),requestAnimationFrame(I)}I(),S.value=()=>{m.paused&&(m.play(),f.value=!0,!P&&(T=j().analyser,P=!0,setInterval(()=>{T.getFloatTimeDomainData(q),v.updateD()},W)))},B.value=()=>{m.pause(),f.value=!1}}),(C,b)=>(st(),at("div",{ref_key:"con",ref:y,class:"con w-full h-full bg-#000"},[F("div",{class:"bt",onClick:V},et(f.value?"pause":"play"),1),F("canvas",{ref_key:"canvas",ref:h,class:"canvas",width:"400",height:"400"},null,512)],512))}}),mt=nt(ot,[["__scopeId","data-v-16fe4b06"]]);export{mt as default};
