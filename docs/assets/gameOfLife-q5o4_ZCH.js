var F=Object.defineProperty;var I=(f,s,u)=>s in f?F(f,s,{enumerable:!0,configurable:!0,writable:!0,value:u}):f[s]=u;var m=(f,s,u)=>(I(f,typeof s!="symbol"?s+"":s,u),u);import{i as M}from"./initStats-z-qGLZo8.js";import{d as R,r as k,j as q,G,e as O,f as P,o as U,_ as j}from"./index-Dk52mj26.js";const z=R({__name:"gameOfLife",setup(f){const{floor:s,random:u,abs:V}=Math,v=k(),a=k();let b=0;return q(async()=>{var _,N,w;const{width:l,height:c}=v.value.getBoundingClientRect();a.value.width=l,a.value.height=c;const d=a.value.getContext("2d"),{stats:$}=M(v.value),n=20,g=s(c/n),p=s(l/n),C=[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],r={};function E(){const i=document.createElement("canvas");i.width=l,i.height=c;const e=i.getContext("2d");e.lineWidth=.5,e.strokeStyle="#000";for(let t=0;t<p;t+=1)e.beginPath(),e.moveTo(t*n,0),e.lineTo(t*n,c),e.stroke();for(let t=0;t<g;t+=1)e.beginPath(),e.moveTo(0,t*n),e.lineTo(l,t*n),e.stroke();return i}const L=E();class S{constructor(e,t,o){m(this,"x");m(this,"y");m(this,"isAlive");m(this,"neighborNum",0);this.x=e,this.y=t,this.isAlive=o}updateNeighborNum(){this.neighborNum=0,C.forEach(([e,t])=>{const o=this.x+e,h=this.y+t;o<0||o>=p||h<0||h>=g||r[`${o},${h}`].isAlive&&(this.neighborNum+=1)})}update(){this.updateNeighborNum(),this.isAlive&&this.neighborNum<2&&(this.isAlive=!1),this.isAlive&&this.neighborNum>=2&&this.neighborNum<=3&&(this.isAlive=!0),this.isAlive&&this.neighborNum>3&&(this.isAlive=!1),!this.isAlive&&this.neighborNum===3&&(this.isAlive=!0)}draw(){this.isAlive?d.fillStyle="#000":d.fillStyle="#fff",d.fillRect(this.x*n,this.y*n,n,n)}}function T(){for(let i=0;i<p;i++)for(let e=0;e<g;e++){const t=new S(i,e,!1);r[`${i},${e}`]=t,t.isAlive=!1}}T(),(_=a.value)==null||_.addEventListener("mousedown",()=>!0),(N=a.value)==null||N.addEventListener("mouseup",()=>!1),(w=a.value)==null||w.addEventListener("click",i=>{const{clientX:e,clientY:t}=i,o=s(e/n),h=s(t/n);r[`${o},${h}`].isAlive=!r[`${o},${h}`].isAlive});let A=!1;document.addEventListener("keyup",i=>{i.code==="Space"&&(A=!A)});const B=1e3/60;let x=0;function y(i){if(d.clearRect(0,0,l,c),d.drawImage(L,0,0,l,c),i-x>B){$.update();for(const e in r)A&&r[e].update(),r[e].draw();x=i}b=requestAnimationFrame(y)}requestAnimationFrame(y)}),G(()=>{cancelAnimationFrame(b)}),(l,c)=>(U(),O("div",{ref_key:"con",ref:v,class:"w-full h-full"},[P("canvas",{ref_key:"canvas",ref:a,class:"block w-full h-full"},null,512)],512))}}),H=j(z,[["__scopeId","data-v-cb853f4d"]]);export{H as default};
