var D=Object.defineProperty;var S=(n,s,r)=>s in n?D(n,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[s]=r;var a=(n,s,r)=>(S(n,typeof s!="symbol"?s+"":s,r),r);import{p as E}from"./p5.min.a014bf83.js";import{P as L}from"./P5Con.59961f17.js";import{A as R,a as V,i as F,n as H}from"./p5bezier.865a72e1.js";import{g as N}from"./math.a4283f4e.js";import{d as O,b as T,c as W,e as m,u as j,o as q,_ as G}from"./index.ee6613f3.js";const J={class:"viewCon"},K=O({__name:"MusicCircle",setup(n){const{PI:s,random:r,floor:g,min:x}=Math;let c,d;const h=T(64),u=h.value/2,p=[],l=[];let f,P=250,_=100,w=.9,C="#5f27cd";class y{constructor(o,e,i){a(this,"$p");a(this,"angle");a(this,"basePos");a(this,"pos");a(this,"r",2);a(this,"audioIndex",0);a(this,"h",0);a(this,"count",0);this.$p=o,this.angle=e,this.basePos=E.Vector.fromAngle(e,x(c,d)/2*w),this.pos=this.basePos.copy(),this.audioIndex=i}draw(){const{$p:o,pos:{x:e,y:i},h:z,count:B}=this;o.noStroke(),o.fill((z+B)%255,255,127),o.circle(e,i,this.r*2)}update(o){this.pos=this.basePos.copy().mult(o),this.h=g(o*255),this.count++}}function A(t){f=t}function I(t){var e;let o=N(u);for(let i=0;i<u;i++)p.push(new y(t,s*2/u*i,(e=o())!=null?e:0))}function v(){const t=f.getAudioData();l.length=0,p.forEach(o=>{let e=t[o.audioIndex];e=e<_?_:e,o.update(e/P),o.draw(),l.push([o.pos.x,o.pos.y])})}function M(t){t.noFill(),t.stroke(C),t.strokeWeight(2),H(l,"CLOSE")}function b(t,o){c=t.width,d=t.height,t.colorMode(t.HSB),F(o),I(t)}function k(t){t.translate(c/2,d/2),t.background("#2d3436"),f&&(v(),M(t))}return(t,o)=>(q(),W("div",J,[m(R,{class:"ac","audio-src":j(V),"fft-size":h.value,onInitAudioAnalyser:A},null,8,["audio-src","fft-size"]),m(L,{setup:b,draw:k})]))}});const tt=G(K,[["__scopeId","data-v-0d40eeea"]]);export{tt as default};
