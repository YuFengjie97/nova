import{D as G}from"./index-DHQU-fng.js";import{g as H}from"./index-ZORhgBxb.js";import{d as L,r as x,h as A,V as d,b as w,e as E,x as B,F as J,i as K,o as k,n as O,_ as Q}from"./index-DCdPxRBL.js";import"./p5.min-B-rUit5K.js";import{g as U}from"./math-D3PV4GFs.js";import{p as X}from"./disco_communism-jY_aEFqL.js";import"./_commonjsHelpers-BosuxZz1.js";const Z={class:"w-full h-full flex justify-center bg-#c23616 overflow-hidden"},tt=["src"],ot=["src"],Y=30,et=L({__name:"crushPic",setup(nt){const{random:g,sqrt:I,floor:P,ceil:T}=Math,z=x([]),C=x(),_=x(),i=x([]),u=[];function V(){return new Promise(a=>{_.value.onload=()=>{const{width:l,height:p}=_.value.getBoundingClientRect();a({width:l,height:p})}})}return A(async()=>{if(!C.value)return;const{width:a,height:l}=await V(),p=new d(a/2,l/2);v(),setTimeout(()=>{D()},1e3);function v(){const n=[],s=P(I(Y)),o=T(Y/s),r=a/s,f=l/o;for(let t=0;t<s;t+=1)for(let e=0;e<o;e+=1){const m=new d((t+g())*r,(e+g())*f);n.push(m)}const c=G.from(n.map(t=>[t.x,t.y])).triangles;for(let t=0;t<c.length;t+=3){const e=n[c[t]],m=n[c[t+1]],b=n[c[t+2]],F=`clip-path: polygon(${e.x}px ${e.y}px,${m.x}px ${m.y}px,${b.x}px ${b.y}px)`;z.value.push(F);const S=U(e,m,b).sub(p),M=S.length()/new d(a/2,l/2).length(),y=new d().copy(S.normalize()).multiply(new d(.3,.3)),N=y.x*a/2,R=y.y*l/2,W=M*-200,$=g()>.8,j=$?y.x*200:0,q=$?y.y*200:0;u.push({x:N,y:R,z:W,rx:j,ry:q})}}function D(){const n=H.timeline({repeat:-1});u.forEach((s,o)=>{const{x:r,y:f,z:h,rx:c,ry:t}=s,e=i.value[o];n.to(e,{x:r,y:f,z:h,rotateX:c,rotateY:t,duration:1,ease:"bounce.out"},"<")}),u.forEach((s,o)=>{const{x:r,y:f,z:h,rx:c,ry:t}=s,e=i.value[o];n.to(e,{x:r,y:f,z:h,rotateX:c,rotateY:t,duration:1},o===0?">":"<")}),u.forEach((s,o)=>{const r=i.value[o];n.to(r,{x:0,y:0,z:0,rotateX:0,rotateY:0,duration:.3,ease:"bounce.out"},">")}),u.forEach((s,o)=>{const r=i.value[o];n.to(r,{x:0,y:0,z:0,rotateX:0,rotateY:0,duration:1},o===0?">":"<")})}}),(a,l)=>(k(),w("div",Z,[E("div",{ref_key:"picCon",ref:C,class:"pic-con relative h-full"},[E("img",{ref_key:"img",ref:_,class:"relative z--1 invisible block h-full",src:B(X)},null,8,tt),(k(!0),w(J,null,K(z.value,(p,v)=>(k(),w("img",{ref_for:!0,ref_key:"imgs",ref:i,key:v,style:O([p]),class:"absolute top-0 left-0 block h-full",src:B(X)},null,12,ot))),128))],512)]))}}),ft=Q(et,[["__scopeId","data-v-b01db4b7"]]);export{ft as default};
