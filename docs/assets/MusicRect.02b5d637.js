var C=Object.defineProperty;var E=(c,i,a)=>i in c?C(c,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[i]=a;var u=(c,i,a)=>(E(c,typeof i!="symbol"?i+"":i,a),a);import{A as S,a as L,i as D,n as R}from"./p5bezier.f1d129b9.js";import{P as I}from"./P5Con.b48e0c05.js";import{p as N}from"./p5.min.b3008bde.js";import{d as P,b as T,c as V,e as x,u as W,o as F,_ as j}from"./index.21e0aca7.js";const q={class:"viewCon"},G=P({__name:"MusicRect",setup(c){let i;function a(e){i=e}let m,r;const w=T(128),h=250,p=w.value/2,f=[];let n,A=2,H=.6,k=60;class v{constructor(t,s){u(this,"$p");u(this,"pos");u(this,"h",0);u(this,"rectHeight",0);this.$p=t,this.pos=s}draw(t,s){let{$p:o,pos:{x:_,y:l},rectHeight:g}=this;o.fill(this.h,255,127),o.push(),o.rectMode(o.CENTER),o.noStroke(),o.translate(0,r/2);let d=n*.2;o.rect(_,l,n,this.rectHeight+A,d,d,d,d),o.pop()}update(t){this.updateH(t),this.updateHeight(t)}updateH(t){this.h=this.$p.map(t,0,h,0,255)}updateHeight(t){this.rectHeight=this.$p.map(t,0,h,0,r*H)}}function y(e){for(let t=0;t<p;t++)f.push(new v(e,new N.Vector(t*n,0)))}function M(e){for(let t=0;t<p;t++){let s=i.getAudioData()[t];f[t].update(s),f[t].draw(s,t)}}function b(e){e.push(),e.translate(0,r/2),e.noFill(),e.stroke("#fff"),e.strokeWeight(2);let t=[],s=[];i.getAudioData().forEach((o,_)=>{let l=_*n,g=e.map(o,0,h,0,r/2)*H+k;t.push([l,-g]),s.push([l,g])}),R(t),R(s),e.pop()}function z(e,t){m=e.width,r=e.height,n=m/p,e.frameRate(30),e.colorMode(e.HSB),e.noStroke(),y(e),t&&D(t)}function B(e){e.background("rgba(0, 0, 0, 0.08)"),i&&(M(),b(e))}return(e,t)=>(F(),V("div",q,[x(S,{class:"ac","audio-src":W(L),"fft-size":w.value,onInitAudioAnalyser:a},null,8,["audio-src","fft-size"]),x(I,{setup:z,draw:B})]))}});const X=j(G,[["__scopeId","data-v-a693c0bc"]]);export{X as default};
