var P=Object.defineProperty;var Y=(c,n,r)=>n in c?P(c,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[n]=r;var o=(c,n,r)=>(Y(c,typeof n!="symbol"?n+"":n,r),r);import{c as E}from"./chroma-q6CBzxn9.js";import{a as R}from"./simplex-noise-CoJLqHZY.js";import{i as z}from"./audio2-GAo0SpJu.js";import{m as M}from"./audio-sugarCrush-sMDL0Z2H.js";import{i as N}from"./initStats-ly1d5gdj.js";import{d as $,r as B,h as U,o as V,b as j,e as k,t as G,_ as H}from"./index-cP8reCTr.js";const J=$({__name:"freqAndDomain",setup(c){R();const{min:n,max:r,PI:K,sin:L,cos:O,atan:Q,random:W,abs:X,sqrt:Z,floor:tt}=Math,f=B(),l=B();let i;const u=800,d=32,q=10,b=["#d63031","#81ecec","#fdcb6e"];E.scale(b);const y=100,m=new Uint8Array(d/2),v=new Float32Array(d);let p;const{audio:x,getAnalyser:C}=z(M,d),g=B(!1);function F(){x.paused?(x.play(),g.value=!0,p=C().analyser):(x.pause(),g.value=!1)}class S{constructor(t,e){o(this,"x",0);o(this,"y",0);o(this,"xt",0);o(this,"yt",0);this.x=t,this.y=e,this.xt=t,this.yt=e}updateYT(t){this.yt=t}update(){this.x+=(this.xt-this.x)*.1,this.y+=(this.yt-this.y)*.1}}class w{constructor(t,e){o(this,"points",[]);o(this,"yBase",0);o(this,"type","f");const s=e==="d"?d:d/2;this.points=Array.from({length:s}).map((a,D)=>new S(D*(u/s),t)),this.type=e,this.yBase=t}update(){this.points.forEach(t=>t.update())}updateT(){this.points.forEach((t,e)=>{if(this.type==="f"){const s=-m[e]/255*y+this.yBase;t.updateYT(s)}if(this.type==="d"){const s=v[e]*y+this.yBase;t.updateYT(s)}if(this.type==="fd"){const s=-m[e]/255,a=v[e],I=s*a*y+this.yBase;t.updateYT(I)}})}draw(){i.beginPath();for(let t=0;t<this.points.length-1;t++){const e=this.points[t],s=this.points[t+1],a={x:(e.x+s.x)/2,y:(e.y+s.y)/2};t===0?i.moveTo(a.x,a.y):i.quadraticCurveTo(e.x,e.y,a.x,a.y)}i.stroke()}}const _=new w(300,"f"),T=new w(500,"d"),A=new w(700,"fd");return U(()=>{const{stats:h}=N(f.value),{width:t,height:e}=f.value.getBoundingClientRect(),s=n(t,e);l.value.width=u,l.value.height=u,l.value.style.cssText=`width:${s}px;height:${s}px`,i=l.value.getContext("2d"),i.strokeStyle="#fff";function a(){h.update(),i.clearRect(0,0,u,u),_.update(),T.update(),A.update(),_.draw(),T.draw(),A.draw(),requestAnimationFrame(a)}a(),setInterval(()=>{p&&p.getFloatTimeDomainData(v),p&&p.getByteFrequencyData(m),_.updateT(),T.updateT(),A.updateT()},q)}),(h,t)=>(V(),j("div",{ref_key:"con",ref:f,class:"con w-full h-full bg-#000"},[k("div",{class:"bt",onClick:F},G(g.value?"pause":"play"),1),k("canvas",{ref_key:"canvas",ref:l,class:"canvas",width:"400",height:"400"},null,512)],512))}}),rt=H(J,[["__scopeId","data-v-922ea979"]]);export{rt as default};
