var T=Object.defineProperty;var W=(s,t,n)=>t in s?T(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var p=(s,t,n)=>(W(s,typeof t!="symbol"?t+"":t,n),n);import{P as X}from"./P5Con.f63ebe60.js";import{p as Y}from"./p5.min.f1d77678.js";import{d as j,c as B,e as C,o as L}from"./index.c0bfbb90.js";const{sin:w,cos:_,floor:K}=Math;function M(s,t){let n=!1;for(let o=0,e=s.length-1;o<s.length;o++)s[o].y>t[1]!=s[e].y>t[1]&&t[0]<(s[e].x-s[o].x)*(t[1]-s[o].y)/(s[e].y-s[o].y)+s[o].x&&(n=!n),e=o;return n}function z(s){let t=0,n,o,e,i,l=s.length;for(n=0,o=l-1;n<l;o=n,n++)e=s[n],i=s[o],t+=e.x*i.y,t-=e.y*i.x;return t/=2,t}function I(s){let t=0,n=0,o,e,i,l,f,m=s.length;for(o=0,e=m-1;o<m;e=o,o++)l=s[o],f=s[e],i=l.x*f.y-f.x*l.y,t+=(l.x+f.x)*i,n+=(l.y+f.y)*i;return i=z(s)*6,new Y.Vector(t/i,n/i)}function F(s,t,n){let{x:o,y:e}=s,{x:i,y:l}=t;o=(o-i)*_(n)-(e-l)*w(n)+i,e=(o-i)*w(n)+(e-l)*_(n)+l,s.set(o,e)}const G={class:"viewCon"},Q=j({__name:"Tangram",setup(s){let t,n,o,e=400,i,l,f,m,P=null,y=.5,d={},k=[{id:1,c:"#cd9670",center:[0,0],ps:[[-e/2,-e/2],[-e/2,e/2],[0,0],[-e/2,-e/2]]},{id:2,c:"#f4444a",center:[0,0],ps:[[-e/2,e/2],[e/2,e/2],[0,0],[-e/2,e/2]]},{id:3,c:"#fd796d",center:[0,0],ps:[[-e/2,-e/2],[0,-e/2],[-e/4,-e/4],[-e/2,-e/2]]},{id:4,c:"#e7d02d",center:[0,0],ps:[[0,-e/2],[-e/4,-e/4],[0,0],[e/4,-e/4],[0,-e/2]]},{id:5,c:"#f9b02d",center:[0,0],ps:[[e/4,-e/4],[e/4,e/4],[0,0],[e/4,-e/4]]},{id:6,c:"#acc94a",center:[0,0],ps:[[e/4,-e/4],[e/2,0],[e/2,e/2],[e/4,e/4],[e/4,-e/4]]},{id:7,c:"#59afcb",center:[0,0],ps:[[0,-e/2],[e/2,-e/2],[e/2,0],[0,-e/2]]}];class R{constructor(c,a,h){p(this,"id");p(this,"center");p(this,"points");p(this,"color");p(this,"prePos",null);p(this,"curPos",t.createVector(0,0));p(this,"angle",0);this.id=c,this.color=a,this.points=h,this.center=I(h);let{x:g,y:u}=this.center;console.log(g,u)}draw(){const{color:c,points:a,center:h,angle:g}=this;t.fill(c),t.stroke("#000"),t.strokeJoin(t.ROUND),t.strokeWeight(4),t.beginShape();for(let u=0,x=a.length;u<x;u++)t.vertex(a[u].x,a[u].y);t.endShape()}updatePoints(){if(this.center=I(this.points),t.mouseIsPressed&&P===this.id){this.prePos||(this.prePos=t.createVector(f,m)),this.curPos.set(i,l);let c=this.curPos.copy().sub(this.prePos);for(let a=0,h=this.points.length;a<h;a++)this.points[a].add(c);this.prePos.set(i,l)}else this.prePos=null}updateAngle(c){let{center:a,points:h}=this;this.angle+=c?y:-y;let g=t.radians(c?y:-y);for(let u=0,x=h.length;u<x;u++)F(h[u],a,g)}}function b(){for(let r=0,c=k.length;r<c;r++){let{id:a,c:h,ps:g}=k[r];d[a]=new R(a,h,g.map(u=>t.createVector(...u)))}}function S(){for(let r in d)d.hasOwnProperty(r)&&(P===d[r].id&&(t.keyIsDown(t.LEFT_ARROW)||t.keyIsPressed&&t.key==="a"?d[P].updateAngle(!1):(t.keyIsDown(t.RIGHT_ARROW)||t.keyIsPressed&&t.key==="d")&&d[P].updateAngle(!0)),d[r].updatePoints(),d[r].draw())}function A(){i=t.mouseX-n/2,l=t.mouseY-o/2}function O(){let r="Left mouse press to chose shape, holed on to drag, holed on and use <--/a -->/d to rotate";t.fill("#000"),t.noStroke(),t.textSize(24),t.textWrap(t.WORD),t.textAlign(t.CENTER),t.text(r,-200,-340,400)}function V(r){n=r.width,o=r.height,t=r,b()}function D(){t.background("#8e44ad"),t.translate(n/2,o/2),O(),A(),S()}function E(){f=t.mouseX-n/2,m=t.mouseY-o/2;for(const r in d){let c=String(8-Number(r));if(d.hasOwnProperty(c)&&M(d[c].points,[f,m])){P=d[c].id;break}}}function N(){P=null}return(r,c)=>(L(),B("div",G,[C(X,{setup:V,draw:D,"mouse-pressed":E,"mouse-released":N})]))}});export{Q as default};
