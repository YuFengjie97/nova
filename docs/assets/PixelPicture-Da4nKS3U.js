var R=Object.defineProperty;var D=(a,o,n)=>o in a?R(a,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[o]=n;var d=(a,o,n)=>(D(a,typeof o!="symbol"?o+"":o,n),n);import{a as m}from"./p5.min-B-rUit5K.js";import{i as M}from"./initGUI-CcmszmDW.js";import{d as k,z as E,A as F,b as y,o as L,s as G,u as H,e as v,_ as z,r as I,h as O,k as P}from"./index-DEgNrIqq.js";import{P as W}from"./P5-BcfxfNdq.js";import"./_commonjsHelpers-BosuxZz1.js";import"./dat.gui.module-DcMWPYuf.js";const S=a=>(G("data-v-a82a1169"),a=a(),H(),a),$={class:"loading"},q=S(()=>v("div",{class:"mask"},null,-1)),J=S(()=>v("div",{class:"loader"},[v("div",{class:"ring"})],-1)),K=[q,J],Q=k({__name:"Loading",props:{isLoading:{type:Boolean,default:!1},type:{default:0}},setup(a){return(o,n)=>E((L(),y("div",$,K,512)),[[F,o.isLoading]])}}),T=z(Q,[["__scopeId","data-v-a82a1169"]]),C="/nova/assets/test-rkdeV249.jpg",X=k({__name:"PixelPicture",setup(a){const{min:o}=Math,n=I(!1);let t,g=C,p,h;const r={sampleNum:20,isCircle:!1,importImg(){var s;(s=f.value)==null||s.click()},downloadImg(){t.saveCanvas()}},u=[],f=I();function V(){if(f.value){const s=f.value.files[0];g=URL.createObjectURL(s),w(g)}}const x=I();O(()=>{const{gui:s}=M(x.value);s.add(r,"sampleNum",10,100,1).name("sampleNum").onFinishChange(e=>{w(g)}),s.add(r,"isCircle").name("ShowCircle"),s.add(r,"importImg").name("LoadLocalImg").listen(),s.add(r,"downloadImg").name("DownLoad").listen()});class N{constructor(e,i,l){d(this,"pos");d(this,"tarPos");d(this,"vel",new m.Vector(0,0));d(this,"color");d(this,"size");this.tarPos=e,this.pos=new m.Vector(t.random(0,p),t.random(0,h)),this.color=i,this.size=l}show(){t.noStroke(),t.fill(this.color),r.isCircle?t.circle(this.pos.x,this.pos.y,this.size):t.rect(this.pos.x,this.pos.y,this.size,this.size)}update(){const e=m.Vector.dist(this.pos,this.tarPos),i=m.Vector.sub(this.tarPos,this.pos),l=t.map(e,0,50,.08,.3,!0);i.mult(l),this.vel.set(i),this.pos.add(this.vel)}}function b(s,e){let i=600,l=600;const c=s/e;c>1?l=i/c:i=l*c,p=i,h=l,t.createCanvas(p,h)}function w(s){n.value=!0,t.loadImage(s,e=>{b(e.width,e.height);const i=o(e.width,e.height)/r.sampleNum,l=o(p,h)/r.sampleNum;u.length=0,e.loadPixels();for(let c=0;c<e.height;c+=i)for(let _=0;_<e.width;_+=i){const B=e.get(_,c),U=_/e.width*p,A=c/e.height*h;u.push(new N(new m.Vector(U,A),B,l))}n.value=!1})}function j(s){t=s,t.setup=function(){w(C)},t.draw=function(){t.background(51);for(let e=u.length-1;e>=0;e--)u[e].update(),u[e].show()}}return(s,e)=>(L(),y("div",{ref_key:"con",ref:x,class:"viewCon"},[v("input",{ref_key:"file",ref:f,type:"file",accept:"image/png, image/jpeg, image/jpg",style:{display:"none"},onChange:V},null,544),P(W,{sketch:j}),P(T,{"is-loading":n.value},null,8,["is-loading"])],512))}}),ie=z(X,[["__scopeId","data-v-b50bff85"]]);export{ie as default};
