import{d as ee,b as W,h as ne,c as te,a as E,G as ie,K as oe,L as ae,N as se,O as re,R as B,V as ce,U as I,X as G,Y as L,Z as le,$ as de,a0 as ue,a1 as we,D as pe,S as me,P as fe,W as ve,o as he,_ as xe}from"./index.d28c4049.js";import{S as Ce}from"./stats.module.f23e5c82.js";import{O as ge}from"./OrbitControls.7467a5d6.js";const _e={class:"viewCon"},be=ee({__name:"CubeLine",setup(ye){const{random:d,sqrt:N}=Math,P=W(),U=W();let D,z,C,u,r,w,f,o=500,v=500,h=1e3,n=new Float32Array(h*3),c=new Float32Array(h**2*3),l=new Float32Array(h**2*3),g=[],_,b,M=100,A=20,p;const x={showDots:!0,showLines:!0,particleNum:500,minDistance:100,maxConnection:20};function V(){const e=new ie({width:300});e.add(x,"showDots").onChange(function(i){b.visible=i}),e.add(x,"showLines").onChange(function(i){p.visible=i}),e.add(x,"particleNum",0,h,1).onChange(function(i){v=i}),e.add(x,"minDistance",0,300,1).onChange(function(i){M=i}),e.add(x,"maxConnection",0,30,1).onChange(function(i){A=i})}function k(){w=new oe,C.add(w);let e=new ae(o,o,o);f=new se(new re(e)),f.material.color.setRGB(255,0,0),f.material.blending=B,f.material.transparent=!0,w.add(f)}function F(){for(let e=0;e<h;e++){let i=d()*o-o/2,y=d()*o-o/2,t=d()*o-o/2;n[e*3]=i,n[e*3+1]=y,n[e*3+2]=t,g.push({vel:new ce(d()*2-1,d()*2-1,d()*2-1),numConnection:0})}}function O(){_=new I,_.setDrawRange(0,v),_.setAttribute("position",new G(n,3).setUsage(L));const e=new le({color:16777215,size:3,blending:B,transparent:!0,sizeAttenuation:!1});b=new de(_,e),w.add(b)}function j(){const e=new ue({vertexColors:!0,blending:B,transparent:!0}),i=new I;i.setAttribute("position",new G(c,3).setUsage(L)),i.setAttribute("color",new G(l,3).setUsage(L)),p=new we(i,e),w.add(p)}function q(){let e=0,i=0,y=0;for(let t=0;t<v;t++)g[t].numConnection=0;for(let t=0;t<v;t++){const a=g[t];if((n[t*3]<-o/2||n[t*3]>o/2)&&(a.vel.x=-a.vel.x),(n[t*3+1]<-o/2||n[t*3+1]>o/2)&&(a.vel.y=-a.vel.y),(n[t*3+2]<-o/2||n[t*3+2]>o/2)&&(a.vel.z=-a.vel.z),n[t*3]+=a.vel.x,n[t*3+1]+=a.vel.y,n[t*3+2]+=a.vel.z,!(a.numConnection>=A))for(let s=0;s<v;s++){const Z=n[t*3]-n[s*3],J=n[t*3+1]-n[s*3+1],Q=n[t*3+2]-n[s*3+2],R=N(Z**2+J**2+Q**2);if(R<M){const S=g[s];if(S.numConnection>=A)continue;a.numConnection++,S.numConnection++,c[i++]=n[t*3],c[i++]=n[t*3+1],c[i++]=n[t*3+2],c[i++]=n[s*3],c[i++]=n[s*3+1],c[i++]=n[s*3+2];const m=1-R/M;l[e++]=m,l[e++]=m,l[e++]=m,l[e++]=m,l[e++]=m,l[e++]=m,y++}}}p.geometry.setDrawRange(0,y*2),p.geometry.attributes.position.needsUpdate=!0,p.geometry.attributes.color.needsUpdate=!0,b.geometry.attributes.position.needsUpdate=!0}function $(){D=Ce(),U.value.append(D.dom)}function K(){z=new ge(u,r.domElement),z.minDistance=1e3,z.maxDistance=3e3}function T(){C.add(new pe(1e3))}function X(){u.aspect=window.innerWidth/window.innerHeight,u.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)}function Y(){C=new me,u=new fe(45,window.innerWidth/window.innerHeight,1,4e3),u.position.z=1e3,r=new ve({canvas:P.value,antialias:!0}),r.setSize(window.innerWidth,window.innerHeight),r.setPixelRatio(window.devicePixelRatio),r.setSize(window.innerWidth,window.innerHeight),window.addEventListener("resize",X)}function H(){let e=Date.now()*1e-4;requestAnimationFrame(H),D.update(),q(),w.rotation.y=e,r.render(C,u)}return ne(()=>{V(),Y(),T(),$(),K(),k(),F(),O(),j(),H()}),(e,i)=>(he(),te("div",_e,[E("div",{class:"con",ref_key:"canvasCon",ref:U},[E("canvas",{class:"canvas",ref_key:"canvasDom",ref:P},null,512)],512)]))}});const Ae=xe(be,[["__scopeId","data-v-4c49bd10"]]);export{Ae as default};
