var T=Object.defineProperty;var U=(l,r,s)=>r in l?T(l,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[r]=s;var o=(l,r,s)=>(U(l,typeof r!="symbol"?r+"":r,s),s);import{f as c}from"./fabric-1Dtxchkb.js";import{C as v}from"./Card-Md10E85g.js";import{n as J}from"./noise-8YyA3euy.js";import"./p5.min-8Dsz88oV.js";import{d as K,r as X,B as O,h as Q,b as Z,k as $,l as ee,o as te,e as Y,_ as oe}from"./index-buY-64hZ.js";import"./_commonjsHelpers-4gQjN7DL.js";const ie={class:"flowField"},ne=K({__name:"FlowField",setup(l){const{sin:r,cos:s,PI:re,ceil:F,random:le}=Math,b=X(),k=X(),x=[];let e=null,h=0,p=0,C=0,u=0;const a=50,H=.3,z=.3,D=8e-4;let W=0;const L=360;class M{constructor(t,n){o(this,"position");o(this,"size");o(this,"angle",45);o(this,"originRadius",4);o(this,"lineWidth",2);o(this,"borderWidth",1);o(this,"triangleWidth",10);o(this,"triangleHeight",14);o(this,"arrowColor","#e74c3c");o(this,"group");this.position=t,this.size=n;const{angle:d,lineWidth:m,borderWidth:w,arrowColor:_,originRadius:V,triangleWidth:j,triangleHeight:B,position:{x:f,y:g}}=this,q=new c.fabric.Rect({left:f,top:g,width:n,height:n,stroke:"#3498db",strokeWidth:w,fill:"#fff"});e==null||e.add(q);const E=new c.fabric.Circle({originX:"center",originY:"center",top:g,left:f,radius:V,fill:_});e==null||e.add(E);const I=n*.7+f,R=g,G=new c.fabric.Line([f,g,I,R],{originX:"left",originY:"center",stroke:_,strokeWidth:m,strokeLineCap:"round"}),P=new c.fabric.Triangle({originX:"center",originY:"top",top:R,left:I+B,width:j,height:B,fill:_,angle:90});this.group=new c.fabric.Group([G,P],{top:g,left:f,angle:d,originX:"left",originY:"center"}),e==null||e.add(this.group)}updateAngle(t){this.group.set("angle",t)}}function N(){for(let i=0;i<p;i+=a)for(let t=0;t<h;t+=a)x.push(new M({x:t,y:i},a))}function S(){let i=0;for(let t=0;t<C;t++){i+=H,W+=D;let n=0;for(let d=0;d<u;d++){n+=z;const m=J(i,n,W)*L,w=d+t*u;x[w].updateAngle(m)}}e==null||e.renderAll()}let y=0;function A(){S(),y=requestAnimationFrame(A),e==null||e.renderAll()}return O(()=>{cancelAnimationFrame(y)}),Q(()=>{var n;const{width:i,height:t}=(n=b.value)==null?void 0:n.getBoundingClientRect();h=i,p=t,u=F(h/a),C=F(p/a),e=new c.fabric.StaticCanvas(k.value,{width:h,height:p,backgroundColor:"#3498db"}),N(),A()}),(i,t)=>(te(),Z("div",ie,[$(v,{class:"card"},{default:ee(()=>[Y("div",{ref_key:"con",ref:b,class:"con"},[Y("canvas",{ref_key:"canvasDom",ref:k},null,512)],512)]),_:1})]))}}),pe=oe(ne,[["__scopeId","data-v-a3c437aa"]]);export{pe as default};
