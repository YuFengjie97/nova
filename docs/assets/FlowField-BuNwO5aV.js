var S=Object.defineProperty;var V=(l,r,s)=>r in l?S(l,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[r]=s;var o=(l,r,s)=>(V(l,typeof r!="symbol"?r+"":r,s),s);import{f as c}from"./fabric-CDjgr4fn.js";import{C as G}from"./Card-Cl8n85vE.js";import{n as P}from"./noise-CqzBSU_F.js";import"./p5.min-7bV0qykS.js";import{d as T,r as X,E as U,j as v,e as J,q as K,s as O,o as Q,f as Y,_ as Z}from"./index-CXaHQ9wk.js";const $={class:"flowField"},g=50,ee=.3,te=.3,oe=8e-4,ie=360,ne=T({__name:"FlowField",setup(l){const{sin:r,cos:s,PI:re,ceil:F,random:le}=Math,b=X(),x=X(),C=[];let e=null,h=0,p=0,k=0,u=0,W=0;class H{constructor(t,n){o(this,"position");o(this,"size");o(this,"angle",45);o(this,"originRadius",4);o(this,"lineWidth",2);o(this,"borderWidth",1);o(this,"triangleWidth",10);o(this,"triangleHeight",14);o(this,"arrowColor","#e74c3c");o(this,"group");this.position=t,this.size=n;const{angle:a,lineWidth:w,borderWidth:m,arrowColor:_,originRadius:z,triangleWidth:D,triangleHeight:I,position:{x:d,y:f}}=this,E=new c.fabric.Rect({left:d,top:f,width:n,height:n,stroke:"#3498db",strokeWidth:m,fill:"#fff"});e==null||e.add(E);const L=new c.fabric.Circle({originX:"center",originY:"center",top:f,left:d,radius:z,fill:_});e==null||e.add(L);const B=n*.7+d,R=f,M=new c.fabric.Line([d,f,B,R],{originX:"left",originY:"center",stroke:_,strokeWidth:w,strokeLineCap:"round"}),N=new c.fabric.Triangle({originX:"center",originY:"top",top:R,left:B+I,width:D,height:I,fill:_,angle:90});this.group=new c.fabric.Group([M,N],{top:f,left:d,angle:a,originX:"left",originY:"center"}),e==null||e.add(this.group)}updateAngle(t){this.group.set("angle",t)}}function j(){for(let i=0;i<p;i+=g)for(let t=0;t<h;t+=g)C.push(new H({x:t,y:i},g))}function q(){let i=0;for(let t=0;t<k;t++){i+=ee,W+=oe;let n=0;for(let a=0;a<u;a++){n+=te;const w=P(i,n,W)*ie,m=a+t*u;C[m].updateAngle(w)}}e==null||e.renderAll()}let y=0;function A(){q(),y=requestAnimationFrame(A),e==null||e.renderAll()}return U(()=>{cancelAnimationFrame(y)}),v(()=>{var n;const{width:i,height:t}=(n=b.value)==null?void 0:n.getBoundingClientRect();h=i,p=t,u=F(h/g),k=F(p/g),e=new c.fabric.StaticCanvas(x.value,{width:h,height:p,backgroundColor:"#3498db"}),j(),A()}),(i,t)=>(Q(),J("div",$,[K(G,{class:"card"},{default:O(()=>[Y("div",{ref_key:"con",ref:b,class:"con"},[Y("canvas",{ref_key:"canvasDom",ref:x},null,512)],512)]),_:1})]))}}),he=Z(ne,[["__scopeId","data-v-a3c437aa"]]);export{he as default};
