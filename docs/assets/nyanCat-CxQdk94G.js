var M=Object.defineProperty;var X=(f,a,r)=>a in f?M(f,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):f[a]=r;var i=(f,a,r)=>(X(f,typeof a!="symbol"?a+"":a,r),r);import{d as D,r as L,h as G,V as y,B as H,b as U,e as Y,o as j}from"./index-Ct6ceUkE.js";import{a as J}from"./simplex-noise-BtZ5wMFy.js";import{i as K}from"./initStats-C5VNgmNK.js";import{c as O,p as Q}from"./canvas-Bae2WlW-.js";import"./_commonjsHelpers-BosuxZz1.js";const u=20,z=30,E=40,ot=D({__name:"nyanCat",setup(f){const a=J(),{floor:r,random:v}=Math,R=L(),d=L();let S=0,_;return G(async()=>{const{width:p,height:x}=R.value.getBoundingClientRect();d.value.width=p,d.value.height=x;const s=d.value.getContext("2d"),{stats:N}=K(R.value),l=new y(p/2,x/2);d.value.addEventListener("mousemove",n=>{const{clientX:e,clientY:t}=n;l.x=e,l.y=t});const P=105/68,w=u*9,C=w*P;class b{constructor(){i(this,"size",10);i(this,"type",0);i(this,"pos");i(this,"isLive",!0);i(this,"lastTime",0);i(this,"interval",.1);this.pos=new y(v()*p+p,v()*x),this.type=r(v()*4)}update(e){e-this.lastTime>this.interval&&(this.type=(this.type+1)%4,this.lastTime=e),this.pos.x-=10,this.pos.x<-10&&(this.isLive=!1)}draw(){const e=this.pos,t=this.size;s.fillStyle="#fff",this.type===0&&s.fillRect(this.pos.x,this.pos.y,this.size,this.size),this.type===1&&(s.fillRect(e.x,e.y,t,t),s.fillRect(e.x-t,e.y,t,t),s.fillRect(e.x+t,e.y,t,t),s.fillRect(e.x,e.y-t,t,t),s.fillRect(e.x,e.y+t,t,t)),this.type===2&&(s.fillRect(e.x,e.y,t,t),s.fillRect(e.x-t,e.y,t,t),s.fillRect(e.x-2*t,e.y,t,t),s.fillRect(e.x+t,e.y,t,t),s.fillRect(e.x+2*t,e.y,t,t),s.fillRect(e.x,e.y-t,t,t),s.fillRect(e.x,e.y-2*t,t,t),s.fillRect(e.x,e.y+t,t,t),s.fillRect(e.x,e.y+2*t,t,t)),this.type===3&&(s.fillRect(e.x-1.5*t,e.y-1.5*t,t,t),s.fillRect(e.x+1.5*t,e.y+1.5*t,t,t),s.fillRect(e.x+1.5*t,e.y-1.5*t,t,t),s.fillRect(e.x-1.5*t,e.y+1.5*t,t,t),s.fillRect(e.x-2*t,e.y,t,t),s.fillRect(e.x+2*t,e.y,t,t),s.fillRect(e.x,e.y-2*t,t,t),s.fillRect(e.x,e.y+2*t,t,t))}}class V{constructor(e){i(this,"points",[]);i(this,"color","#fff");this.color=e}draw(){s.beginPath(),s.moveTo(this.points[0].x,this.points[0].y);for(let h=1;h<this.points.length-1;h+=1){const g=this.points[h],F=this.points[h+1],I=new y().copy(g).add(F).multiplyScalar(.5);s.quadraticCurveTo(g.x,g.y,I.x,I.y)}const e=this.points[this.points.length-1];s.lineTo(e.x,e.y);const t=this.points[0],o=this.points[this.points.length-1],c=s.createLinearGradient(t.x,t.y,o.x,o.y);c.addColorStop(0,"transparent"),c.addColorStop(.5,this.color),c.addColorStop(1,this.color),s.strokeStyle=c,s.stroke()}}class W{constructor(e){i(this,"points",[]);i(this,"curves",[]);i(this,"noiseXRatio",1);i(this,"colors",["#e12523","#dc8d30","#deeb44","#01eb3e","#138ee9","#7127ee"]);i(this,"catCanvas");this.catCanvas=e;for(let t=0;t<this.colors.length;t+=1){const o=new V(this.colors[t]);this.curves.push(o)}}updateCurvePoints(){this.curves.forEach((e,t,o)=>{e.points=this.points.map(h=>new y(h.x,h.y+(t-o.length/2)*u+u/2));const c=new y(l.x,l.y+(t-o.length/2)*u+u/2);e.points.push(c)})}update(e){this.points.length=0;const t=l.y-z;for(let o=-E;o<l.x-C/2;o+=E){const c=t+a(o*.01+e*2,0)*z*2;this.points.push(new y(o,c))}this.updateCurvePoints()}draw(){this.curves.forEach(e=>e.draw()),s.drawImage(this.catCanvas,l.x-C/2,l.y-w/2)}}const{canvas:q,timer:A}=await O({w:C,h:w},Q,6),k=new W(q);_=A;const T=10,m=[];for(let n=0;n<T;n++)m.push(new b);function B(){const n=performance.now()/1e3;s.fillStyle="#74b9ff",s.fillRect(0,0,p,x),s.lineWidth=u,k.update(n),k.draw();let e=0;for(;e<T;){const t=m[e];t.update(n),t.isLive?(t.draw(),e++):(m.splice(e,1),m.push(new b))}N.update(),S=requestAnimationFrame(B)}B()}),H(()=>{cancelAnimationFrame(S),clearInterval(_)}),(p,x)=>(j(),U("div",{ref_key:"con",ref:R,class:"w-full h-full"},[Y("canvas",{ref_key:"canvas",ref:d,class:"block w-full h-full"},null,512)],512))}});export{ot as default};
