var le=Object.defineProperty;var de=(v,h,g)=>h in v?le(v,h,{enumerable:!0,configurable:!0,writable:!0,value:g}):v[h]=g;var d=(v,h,g)=>(de(v,typeof h!="symbol"?h+"":h,g),g);import{d as he,b as L,e as ce,a1 as pe,V as ue,A as we,S as me,C as fe,P as ge,W as be,y as ve,af as Ce,an as Me,o as ye,c as xe,a as D,G as Pe,a8 as Ge,ao as Re,M as Se,ap as He,E as Le,L as Ee,aq as Be}from"./index-242-C2dX.js";import{R as _e,E as ke}from"./RenderPass-8wrLhG63.js";import{U as ze}from"./UnrealBloomPass-YcpCEFaY.js";import{S as Ae}from"./stats.module-nRd2dy6L.js";import{O as Ve}from"./OrbitControls-_GrtrkN1.js";import{u as We}from"./useGUI-7eNpPIRv.js";import"./dat.gui.module-PWGADmkp.js";const Ze=he({__name:"SolarSystem",setup(v){const{random:h,PI:g,floor:Fe,ceil:Te,min:je,max:Ie,sin:Ue,cos:qe}=Math,E=L(),B=L();let M=window.innerWidth,y=window.innerHeight,G,P,c,w,b,x,m,_,p;ce(()=>{O(),ee(),N(),Y(),K(),te(),Z(),X(),q()});let o,k,z,R,A,V,W,F,T,j,I;const i=20,u=10*i,f=20,S=[],t={vBase:.001,showHelper:!1,lightVisible:!0,lightColor:15158332,intensity:5,distance:2e3,decay:.5,exposure:1,bloomStrength:1.5,bloomThreshold:0,bloomRadius:0},U=L();function O(){const{gui:n}=We(U.value);n.add(t,"showHelper").onChange(e=>{S.forEach(r=>r.visible=e)}),n.add(t,"vBase",0,.03,.001);const s=n.addFolder("light");s.open(),s.add(t,"lightVisible").onChange(e=>{p.visible=e}),s.addColor(t,"lightColor").onChange(e=>{p.color.setHex(e)}),s.add(t,"intensity",0,7,.1).onChange(e=>{p.intensity=e}),s.add(t,"distance",0,4e3,1).onChange(e=>{p.distance=e}),s.add(t,"decay",0,10,.1).onChange(e=>{p.decay=e});const a=n.addFolder("glow");a.open(),a.add(t,"exposure",0,10,.1).onChange(e=>{b.toneMappingExposure=e**4}),a.add(t,"bloomStrength",0,10,.1).onChange(e=>{m.threshold=e}),a.add(t,"bloomThreshold",0,10,.1).onChange(e=>{m.strength=e}),a.add(t,"bloomRadius",0,10,.1).onChange(e=>{m.radius=e})}class l{constructor(s=!1,a,e,r,H,C){d(this,"isGlow");d(this,"group");d(this,"targetPlanet");d(this,"planetMesh");d(this,"oribitCurve");d(this,"oribitMesh");d(this,"oribitR");d(this,"t",0);d(this,"vRatio");this.isGlow=s,this.targetPlanet=C,this.group=new Pe;const ne=new Ge(a,128,128),se=new Re({color:e});if(this.planetMesh=new Se(ne,se),this.planetMesh.layers.enable(0),this.group.add(this.planetMesh),this.t=h(),this.vRatio=H,C){this.oribitR=r;const{x:oe,y:ie}=C==null?void 0:C.planetMesh.position;C.group.add(this.group),this.oribitCurve=new He(oe,ie,r,r,0,2*Math.PI,!0,0);const ae=new Le().setFromPoints(this.oribitCurve.getPoints(300)),re=new Ee({color:e});this.oribitMesh=new Be(ae,re),this.oribitMesh.layers.enable(0),this.oribitMesh.rotation.x=g/2,this.group.add(this.oribitMesh)}}planetMoveByCurve(){if(this.t>=1&&(this.t=0),this.targetPlanet){const{x:s,y:a,z:e}=this.targetPlanet.planetMesh.position;this.group.position.set(s,a,e),this.t+=this.vRatio*t.vBase;const{x:r,y:H}=this.oribitCurve.getPoint(this.t);this.planetMesh.position.set(r,0,H)}}}function N(){_=new _e(c,w),m=new ze(new pe(window.innerWidth,window.innerHeight),1.5,.4,.85),m.threshold=t.bloomThreshold,m.strength=t.bloomStrength,m.radius=t.bloomRadius,x=new ke(b),x.addPass(_),x.addPass(m)}function J(){w.layers.set(1),x.render(),w.layers.set(0)}function K(){o=new l(!0,u,15158332,0,0),c.add(o.group),k=new l(!1,.5*i,1752220,u+2*f,4.1,o),z=new l(!1,i,15965202,u+6*f,1.6,o),R=new l(!1,i,3447003,u+12*f,1,o),V=new l(!1,.8*i,12597547,u+16*f,.5,o),W=new l(!1,.3*i,2600544,u+20*f,.08,o),F=new l(!1,5*i,9807270,u+30*f,.03,o),T=new l(!1,4*i,9323693,u+50*f,.01,o),j=new l(!1,3*i,3447003,u+60*f,.006,o),A=new l(!1,.2*i,15528177,1.4*i,2,R),I=[k,z,R,V,W,F,T,j,A]}function Q(){I.forEach(n=>{n.planetMoveByCurve()})}function X(){G=Ae(),B.value.append(G.dom)}function Y(){P=new Ve(w,b.domElement),P.target=new ue(0,0,0),P.object.position.set(300,400,800),P.update()}function Z(){const n=new we(1600);n.visible=t.showHelper,S.push(n),c.add(n)}function $(){M=window.innerWidth,y=window.innerHeight,w.aspect=M/y,w.updateProjectionMatrix(),b.setSize(M,y)}function ee(){c=new me,c.background=new fe(0),w=new ge(75,M/y,1,4e4),b=new be({canvas:E.value,antialias:!0}),b.setSize(M,y),window.addEventListener("resize",$)}function te(){const n=new ve(4210752);c.add(n),p=new Ce(15158332,5,2e3,.5);const{x:s,y:a,z:e}=o.planetMesh.position;p.position.set(s,a,e),c.add(p);const r=new Me(p,1600);r.visible=t.showHelper,S.push(r),c.add(r)}function q(){requestAnimationFrame(q),G.update(),Q(),J(),b.render(c,w),x.render()}return(n,s)=>(ye(),xe("div",{ref_key:"con",ref:U,class:""},[D("div",{ref_key:"canvasCon",ref:B,class:"canvasCon"},[D("canvas",{ref_key:"canvasDom",ref:E,class:"canvas"},null,512)],512)],512))}});export{Ze as default};
