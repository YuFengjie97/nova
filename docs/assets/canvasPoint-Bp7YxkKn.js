import{c as C}from"./simplex-noise-BtZ5wMFy.js";import{d as M,r as f,G as j,j as A,e as D,f as b,o as R}from"./index-Dk52mj26.js";import{v as E,i as F}from"./color-CVlT263R.js";const N="/nova/assets/disco_kim-ZXw9A23-.jpg",z=M({__name:"canvasPoint",setup(q){const m=f(),s=f(),r=f(),k=C(),y=F([.5,0,.5],[.5,0,.5],[.5,0,.5],[0,0,.5]);let u=0;return j(()=>{cancelAnimationFrame(u)}),A(async()=>{var w,_;const{width:d}=m.value.getBoundingClientRect(),i=(w=s.value)==null?void 0:w.getContext("2d"),c=(_=r.value)==null?void 0:_.getContext("2d"),e=Math.floor(d/2);function x(){return new Promise(n=>{const t=new Image;t.src=N,t.onload=()=>{const a=t.height/t.width,o=Math.floor(e*a);s.value.width=e,s.value.height=o,r.value.width=e,r.value.height=o,i.drawImage(t,0,0,e,o),n(o)}})}const g=await x(),l=i.getImageData(0,0,e,g).data,h=6,v=[];for(let n=0;n<g;n+=h)for(let t=0;t<e;t+=h){const a=(n*e+t)*4,o=l[a]/255,P=l[a+1]/255,B=l[a+2]/255;.299*o+.578*P+.114*B>.4&&v.push({x:t,y:n})}function I(){const n=performance.now()/1e3;c.clearRect(0,0,e,e),v.forEach(({x:t,y:a})=>{c.fillStyle=E(y(k(t*.005,a*.001,n))),c.beginPath(),c.arc(t,a,2,0,Math.PI*2),c.fill()})}function p(){I(),u=requestAnimationFrame(p)}p()}),(d,i)=>(R(),D("div",{ref_key:"con",ref:m,class:"w-full min-h-full bg-#000 flex items-center justify-center"},[b("canvas",{ref_key:"canvas",ref:s,class:"block w-30%"},null,512),b("canvas",{ref_key:"canvas2",ref:r,class:"block w-30%"},null,512)],512))}});export{z as default};
