var N=Object.defineProperty;var q=(a,i,e)=>i in a?N(a,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[i]=e;var h=(a,i,e)=>(q(a,typeof i!="symbol"?i+"":i,e),e);import{d as k,y as E,z as F,c as z,o as V,q as H,s as O,a as x,_ as b,b as S,e as C}from"./index.71e5d15b.js";import{P as T}from"./P5.b30c66ae.js";import{p as _}from"./p5.min.4656aa09.js";import{G as W}from"./dat.gui.module.5aaed78b.js";const j=a=>(H("data-v-a82a1169"),a=a(),O(),a),J={class:"loading"},K=j(()=>x("div",{class:"mask"},null,-1)),M=j(()=>x("div",{class:"loader"},[x("div",{class:"ring"})],-1)),Q=[K,M],X=k({__name:"Loading",props:{isLoading:{type:Boolean,default:!1},type:{default:0}},setup(a){return(i,e)=>E((V(),z("div",J,Q,512)),[[F,a.isLoading]])}});const Y=b(X,[["__scopeId","data-v-a82a1169"]]),L="/nova/assets/test.142d7de0.jpg",Z={class:"viewCon"},ee=k({__name:"PixelPicture",setup(a){const i=S(!1);let e,w=L,u,f,r={pixelSize:20,isCircle:!1,importImg:function(){var s;(s=g.value)==null||s.click()},downloadImg:function(){e.saveCanvas()}},c=r.pixelSize,d=r.pixelSize**2,p=[];const g=S();function B(){if(g.value){let s=g.value.files[0];w=URL.createObjectURL(s),P(w)}}const v=new W({width:300});v.add(r,"pixelSize",4,30,1).name("PixelSize").onFinishChange(function(s){c=s,d=s**2,P(w),e.redraw()}),v.add(r,"isCircle").name("ShowCircle"),v.add(r,"importImg").name("LoadLocalImg").listen(),v.add(r,"downloadImg").name("DownLoad").listen();class U{constructor(t,o){h(this,"pos");h(this,"tarPos");h(this,"vel",new _.Vector(0,0));h(this,"color");this.tarPos=t,this.pos=new _.Vector(e.random(0,u),e.random(0,f)),this.color=o}show(){e.noStroke(),e.fill(this.color),r.isCircle?e.circle(this.pos.x,this.pos.y,c):e.rect(this.pos.x,this.pos.y,c,c)}update(){let t=_.Vector.dist(this.pos,this.tarPos),o=_.Vector.sub(this.tarPos,this.pos),n=e.map(t,0,50,.08,.3,!0);o.mult(n),this.vel.set(o),this.pos.add(this.vel)}}function A(s,t){let o=600,n=600,l=s/t;l>1?n=o/l:o=n*l,u=o,f=n,e.createCanvas(u,f)}function P(s){i.value=!0,e.loadImage(s,t=>{A(t.width,t.height),p.length=0,t.loadPixels();for(let o=0;o<t.height;o+=c)for(let n=0;n<t.width;n+=c){let l=[0,0,0,0];for(let y=o;y<o+c;y++)for(let I=n;I<n+c;I++){let m=t.get(I,y);l[0]+=m[0],l[1]+=m[1],l[2]+=m[2],l[3]+=m[3]}let $=[l[0]/d,l[1]/d,l[2]/d,l[3]/d],D=n/t.width*u,G=o/t.height*f;p.push(new U(new _.Vector(D,G),$))}i.value=!1})}function R(s){e=s,e.setup=function(){P(L)},e.draw=function(){e.background(51);for(let t=p.length-1;t>=0;t--)p[t].update(),p[t].show()}}return(s,t)=>(V(),z("div",Z,[x("input",{onChange:B,ref_key:"file",ref:g,type:"file",accept:"image/png, image/jpeg, image/jpg",style:{display:"none"}},null,544),C(T,{sketch:R}),C(Y,{"is-loading":i.value},null,8,["is-loading"])]))}});const le=b(ee,[["__scopeId","data-v-6d40b3f8"]]);export{le as default};
