var C=Object.defineProperty;var E=(r,i,a)=>i in r?C(r,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[i]=a;var u=(r,i,a)=>(E(r,typeof i!="symbol"?i+"":i,a),a);import{A as S,a as L,i as D,n as H}from"./p5bezier.91a35851.js";import{P as I}from"./P5Con.f6bb9232.js";import{p as N}from"./p5.min.3c63bb55.js";import{d as P,b as T,c as V,e as R,u as W,o as F,_ as j}from"./index.227af3e1.js";const q={class:"viewCon"},G=P({__name:"MusicRect",setup(r){let i;function a(e){i=e}let m,n;const b=T(128),h=250,p=b.value/2,f=[];let c,x=2,w=.6,A=60;class k{constructor(t,s){u(this,"$p");u(this,"pos");u(this,"h",0);u(this,"rectHeight",0);this.$p=t,this.pos=s}draw(t,s){let{$p:o,pos:{x:_,y:d},rectHeight:g}=this;o.fill(this.h,255,127),o.push(),o.rectMode(o.CENTER),o.noStroke(),o.translate(0,n/2);let l=c*.2;o.rect(_,d,c,this.rectHeight+x,l,l,l,l),o.pop()}update(t){this.updateH(t),this.updateHeight(t)}updateH(t){this.h=this.$p.map(t,0,h,0,255)}updateHeight(t){this.rectHeight=this.$p.map(t,0,h,0,n*w)}}function v(e){for(let t=0;t<p;t++)f.push(new k(e,new N.Vector(t*c,0)))}function y(e){for(let t=0;t<p;t++){let s=i.getAudioData()[t];f[t].update(s),f[t].draw(s,t)}}function M(e){e.push(),e.translate(0,n/2),e.noFill(),e.stroke("#fff"),e.strokeWeight(2);let t=[],s=[];i.getAudioData().forEach((o,_)=>{let d=_*c,g=e.map(o,0,h,0,n/2)*w+A;t.push([d,-g]),s.push([d,g])}),H(t),H(s),e.pop()}function z(e,t){m=e.width,n=e.height,c=m/p,e.frameRate(30),e.colorMode(e.HSB),e.noStroke(),v(e),t&&D(t)}function B(e){e.background("rgba(0, 0, 0, 0.08)"),i&&(y(),M(e))}return(e,t)=>(F(),V("div",q,[R(S,{class:"ac","audio-src":W(L),"fft-size":b.value,onInitAudioAnalyser:a},null,8,["audio-src","fft-size"]),R(I,{setup:z,draw:B})]))}});const X=j(G,[["__scopeId","data-v-bd6b1bdf"]]);export{X as default};
