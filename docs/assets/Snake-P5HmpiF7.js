import{a as d}from"./p5.min-WfQBoNak.js";import{P as O}from"./P5-CFZ07hFp.js";import{d as P,r as W,e as A,q as V,o as F}from"./index-CqfaNC88.js";const f=24,y=1,N=6,L=P({__name:"Snake",setup(z){let t,u=0,w=!1;const x=["#870058","#a4303f","#f2d0a4","#ffeccc","#c8d6af"];function g(){const p=t.floor(t.random(0,x.length));return x[p]}const m=W();function v(p){t=p;const{width:i,height:r}=m.value.getBoundingClientRect();class k{constructor(){this.tails=[],this.pos=new d.Vector(i/2,r/2),this.vel=new d.Vector(y,0),this.direction="right"}draw(){t.noStroke(),t.fill("#0984e3"),t.circle(this.pos.x,this.pos.y,f),this.tails.forEach(s=>s.draw())}edge(){(this.pos.x<0||this.pos.x>i||this.pos.y<0||this.pos.y>r)&&(w=!0)}update(s){this.edge(),s?this.direction=s:s=this.direction;const e=t.keyIsDown(t.SHIFT)?N:y;s==="left"?this.vel.set(-e,0):s==="right"?this.vel.set(e,0):s==="up"?this.vel.set(0,-e):s==="down"&&this.vel.set(0,e),this.pos.add(this.vel);for(let o=0;o<this.tails.length;o++){const n=o===0?this.pos:this.tails[o-1].pos,c=this.tails[o].pos.copy().sub(n).mult(f);c.limit(f),this.tails[o].update(n.copy().add(c))}}addTail(s){const{tails:e,direction:o}=this,{pos:{x:n,y:a}}=e.length===0?this:e[e.length-1],c=new E(new d.Vector(n,a),s);(o==="up"||o==="down"||o==="left"||o==="right")&&c.pos.set(n,a),e.push(c)}}class E{constructor(s,e){this.pos=s,this.prePos=s.copy(),this.c=e}draw(){t.fill(this.c),t.circle(this.pos.x,this.pos.y,f)}update(s){this.prePos.set(this.pos),this.pos.set(s.x,s.y)}}class _{constructor(){this.pos=new d.Vector(t.floor(t.random(100,i-100)),t.floor(t.random(100,r-100))),this.c=g()}draw(){t.fill(this.c),t.circle(this.pos.x,this.pos.y,f)}update(s){this.pos.dist(s.pos)<f&&(u++,s.addTail(this.c),this.pos.set(t.floor(t.random(100,i-100)),t.floor(t.random(100,r-100))),this.c=g())}}const l=new k,R=new _;function C(){t.noStroke(),t.fill("#fff"),t.textAlign(t.LEFT,t.TOP),t.textSize(24),t.text(`SCORE: ${u}`,10,10)}function S(){t.fill("#fff"),t.textWrap(t.WORD),t.textAlign(t.CENTER),t.textSize(20),t.text(`键盘方向键控制方向，
    shift加速`,i/2,20)}function T(){t.fill("#fff"),t.textWrap(t.WORD),t.textAlign(t.CENTER),t.textSize(20);const h=`
    GAME OVER
    Your Score: ${u}
    `;t.text(h,i/2,r/2-20)}t.setup=function(){t.createCanvas(i,r),t.rectMode(t.CENTER)},t.draw=function(){t.background("#2d3436"),C(),S(),w?T():(l.update(),l.draw(),R.update(l),R.draw())},t.keyPressed=function(){t.keyCode===t.LEFT_ARROW?l.update("left"):t.keyCode===t.RIGHT_ARROW?l.update("right"):t.keyCode===t.UP_ARROW?l.update("up"):t.keyCode===t.DOWN_ARROW&&l.update("down")},t.windowResized=function(){}}return(p,i)=>(F(),A("div",{ref_key:"con",ref:m,class:"w-full h-full"},[V(O,{class:"w-full",sketch:v})],512))}});export{L as default};
