var P=Object.defineProperty;var T=(a,r,s)=>r in a?P(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s;var i=(a,r,s)=>(T(a,typeof r!="symbol"?r+"":r,s),s);import{C as v}from"./Card-vkcjPBtV.js";import{f as n}from"./fabric-_gHsLMrn.js";import{n as J}from"./noise-YmXM1zo_.js";import"./p5.min-DK4k5B0I.js";import{d as K,b as R,e as O,o as Q,c as U,f as Z,w as $,a as X,_ as ee}from"./index-242-C2dX.js";const te={class:"flowField"},ie=K({__name:"FlowField",setup(a){const{sin:r,cos:s,PI:oe,ceil:F,random:le}=Math,b=R(),x=R(),C=[];let e=null,h=0,p=0,k=0,u=0,d=50,Y=.3,H=.3,z=8e-4,W=0,D=360;class L{constructor(t,l){i(this,"position");i(this,"size");i(this,"angle",45);i(this,"originRadius",4);i(this,"lineWidth",2);i(this,"borderWidth",1);i(this,"triangleWidth",10);i(this,"triangleHeight",14);i(this,"arrowColor","#e74c3c");i(this,"group");this.position=t,this.size=l;let{angle:c,lineWidth:w,borderWidth:m,arrowColor:_,originRadius:S,triangleWidth:V,triangleHeight:A,position:{x:f,y:g}}=this,j=new n.fabric.Rect({left:f,top:g,width:l,height:l,stroke:"#3498db",strokeWidth:m,fill:"#fff"});e==null||e.add(j);let q=new n.fabric.Circle({originX:"center",originY:"center",top:g,left:f,radius:S,fill:_});e==null||e.add(q);let B=l*.7+f,I=g,E=new n.fabric.Line([f,g,B,I],{originX:"left",originY:"center",stroke:_,strokeWidth:w,strokeLineCap:"round"}),G=new n.fabric.Triangle({originX:"center",originY:"top",top:I,left:B+A,width:V,height:A,fill:_,angle:90});this.group=new n.fabric.Group([E,G],{top:g,left:f,angle:c,originX:"left",originY:"center"}),e==null||e.add(this.group)}updateAngle(t){this.group.set("angle",t)}}function M(){for(let o=0;o<p;o+=d)for(let t=0;t<h;t+=d)C.push(new L({x:t,y:o},d))}function N(){let o=0;for(let t=0;t<k;t++){o+=Y,W+=z;let l=0;for(let c=0;c<u;c++){l+=H;let w=J(o,l,W)*D,m=c+t*u;C[m].updateAngle(w)}}e==null||e.renderAll()}function y(){N(),n.fabric.util.requestAnimFrame(y),e==null||e.renderAll()}return O(()=>{var l;const{width:o,height:t}=(l=b.value)==null?void 0:l.getBoundingClientRect();h=o,p=t,u=F(h/d),k=F(p/d),e=new n.fabric.StaticCanvas(x.value,{width:h,height:p,backgroundColor:"#3498db"}),M(),y()}),(o,t)=>(Q(),U("div",te,[Z(v,{class:"card"},{default:$(()=>[X("div",{class:"con",ref_key:"con",ref:b},[X("canvas",{ref_key:"canvasDom",ref:x},null,512)],512)]),_:1})]))}}),fe=ee(ie,[["__scopeId","data-v-92012283"]]);export{fe as default};
