import{d as Q,r as F,aP as H,aQ as R,h as J,E as N,V as k,J as Z,al as j,H as q,I as y,Q as K,Z as O,M as U,o as X,b as Y,a6 as $,a5 as tt}from"./index-cP8reCTr.js";import{D as ot}from"./index-WM3n2avM.js";import{g as et}from"./index-FSCrshNh.js";import{i as nt}from"./initThree-NkW8XKTU.js";import{p as at}from"./disco_communism-NN-qA4tW.js";import"./OrbitControls-Z3L4oYDC.js";import"./initStats-ly1d5gdj.js";const wt=Q({__name:"crushPic",setup(rt){const{random:a,floor:st,ceil:it,PI:m,min:ct,max:z}=Math,x=F();class B extends ${constructor(u,S){super(new tt(u),{depth:S,bevelEnabled:!1})}}const f=new H().load(at);return f.wrapS=R,f.wrapT=R,J(()=>{const{scene:s,camera:u,renderer:S,renderWrap:C}=nt(x.value,!1,!1,!1);s.background=new N(14774357),u.position.set(0,0,800);const n=new k(600,800),d=40,G=10,r=new Z;s.add(r);const D=z(n.x,n.y),I=16742777,b=new j(I,10,D,1);b.position.set(40,40,400),s.add(b);const L=new q(4210752);s.add(L);const p=[];for(let t=-n.x/2;t<n.x/2;t+=d)for(let e=-n.y/2;e<n.y/2;e+=d){const o=new k(a()*d+t,a()*d+e);p.push(o)}const l=ot.from(p.map(t=>[t.x,t.y])).triangles,A=l.length/3;for(let t=0;t<l.length;t+=3){const e=p[l[t]],o=p[l[t+1]],V=p[l[t+2]],g=new B([e,o,V],G),P=g.getAttribute("position"),E=[];for(let w=0;w<P.count;w++){const v=new y().fromBufferAttribute(P,w);E.push((v.x-n.x/2)/n.x,(v.y-n.y/2)/n.y)}g.setAttribute("uv",new K(new Float32Array(E),2));const W=new O({map:f}),M=new U(g,W);M.position.set(0,0,0),r.add(M)}const i=m,c=800,_=Array.from({length:A}).fill(0).map(()=>new y(a()*i-i/2,a()*i-i/2,a()*i-i/2)),h=Array.from({length:A}).fill(0).map(()=>new y(a()*c-c/2,a()*c-c/2,a()*c-c/2));function T(){const t=et.timeline({repeat:-1});t.to(r.rotation,{y:m*2,duration:4,ease:"power2.out"}).add("groupRotateStop"),r.children.forEach((e,o)=>{t.to(e.rotation,{x:_[o].x,y:_[o].y,duration:3,ease:"power2.out"},o===0?"groupRotateStop-=3":"<"),t.to(e.position,{x:h[o].x,y:h[o].y,z:h[o].z,duration:3,ease:"power2.out"},o===0?"groupRotateStop-=3":"<"),o===r.children.length-1&&t.add("randomStop")}),r.children.forEach((e,o)=>{t.to(e.rotation,{x:0,y:0,duration:3,ease:"power2.out"},o===0?"randomStop":"<"),t.to(e.position,{x:0,y:0,z:0,duration:3,ease:"power2.out"},o===0?"randomStop":"<")}),t.to(r.rotation,{y:m*4,duration:4,ease:"power2.out"},"randomStop")}C()(),T()}),(s,u)=>(X(),Y("div",{ref_key:"con",ref:x,class:"w-full h-full"},null,512))}});export{wt as default};
