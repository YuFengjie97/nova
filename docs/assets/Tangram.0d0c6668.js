var j=Object.defineProperty;var L=(s,n,e)=>n in s?j(s,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[n]=e;var f=(s,n,e)=>(L(s,typeof n!="symbol"?n+"":n,e),e);import{P as B}from"./P5Con.978f641d.js";import{p as D}from"./p5.min.8a20e8f9.js";import{d as F,c as G,e as H,o as M}from"./index.1f50e283.js";function q(s,n){let e=!1;for(let o=0,r=s.length-1;o<s.length;o++)s[o].y>n[1]!=s[r].y>n[1]&&n[0]<(s[r].x-s[o].x)*(n[1]-s[o].y)/(s[r].y-s[o].y)+s[o].x&&(e=!e),r=o;return e}function z(s){let n=0,e,o,r,c,u=s.length;for(e=0,o=u-1;e<u;o=e,e++)r=s[e],c=s[o],n+=r.x*c.y,n-=r.y*c.x;return n/=2,n}function I(s){let n=0,e=0,o,r,c,u,t,m=s.length;for(o=0,r=m-1;o<m;r=o,o++)u=s[o],t=s[r],c=u.x*t.y-t.x*u.y,n+=(u.x+t.x)*c,e+=(u.y+t.y)*c;return c=z(s)*6,new D.Vector(n/c,e/c)}const J={class:"viewCon"},v=F({__name:"Tangram",setup(s){const{PI:n}=Math;let e,o,r,c,u,t=400,m,k,R,_,h=null,A=n/180,l={},w=[{id:1,c:"#cd9670",center:[0,0],ps:[[0,0],[0,t],[t/2,t/2],[0,0]]},{id:2,c:"#f4444a",center:[0,0],ps:[[0,t],[t,t],[t/2,t/2],[0,t]]},{id:3,c:"#fd796d",center:[0,0],ps:[[0,0],[t/2,0],[t/4,t/4],[0,0]]},{id:4,c:"#e7d02d",center:[0,0],ps:[[t/2,0],[t/4,t/4],[t/2,t/2],[t*3/4,t/4],[t/2,0]]},{id:5,c:"#f9b02d",center:[0,0],ps:[[t*3/4,t/4],[t*3/4,t*3/4],[t/2,t/2],[t*3/4,t/4]]},{id:6,c:"#acc94a",center:[0,0],ps:[[t*3/4,t/4],[t,t/2],[t,t],[t*3/4,t*3/4],[t*3/4,t/4]]},{id:7,c:"#59afcb",center:[0,0],ps:[[t/2,0],[t,0],[t,t/2],[t/2,0]]}];class b{constructor(a,d,p){f(this,"id");f(this,"center");f(this,"points");f(this,"color");f(this,"prePos",null);f(this,"curPos",e.createVector(0,0));f(this,"angle",0);this.id=a,this.color=d,this.points=p.map(g=>(g.set(g.x+c,g.y+u),g)),this.center=I(p);let{x:y,y:P}=this.center;console.log(this.id,y,P)}draw(){const{color:a,points:d,center:p,angle:y}=this;let{x:P,y:g}=p;e.push(),e.translate(p.x,p.y),e.rotate(y),e.fill(a),e.stroke("#000"),e.strokeJoin(e.ROUND),e.strokeWeight(4),e.beginShape();for(let x=0,N=d.length;x<N;x++)e.vertex(d[x].x-P,d[x].y-g);e.endShape(),e.pop()}updatePoints(){if(this.center=I(this.points),h===this.id){this.prePos||(this.prePos=e.createVector(R,_)),this.curPos.set(m,k);let a=this.curPos.copy().sub(this.prePos);for(let d=0,p=this.points.length;d<p;d++)this.points[d].add(a);this.prePos.set(m,k)}else this.prePos=null}updateAngle(a){this.angle+=a?A:-A,console.log(this.angle)}}function O(){for(let i=0,a=w.length;i<a;i++){let{id:d,c:p,ps:y}=w[i];l[d]=new b(d,p,y.map(P=>e.createVector(...P)))}}function S(){for(let i in l)l.hasOwnProperty(i)&&(h===l[i].id&&(e.keyIsPressed&&e.key==="a"?l[h].updateAngle(!1):e.keyIsPressed&&e.key==="d"&&l[h].updateAngle(!0)),l[i].updatePoints(),l[i].draw())}function W(){m=e.pmouseX,k=e.pmouseY}function C(){let i=`Left mouse press holed on to chose shape,
    move mouse to drag,
    pressed 'a / d' to rotate quickly,
    pressed once 'LEFT_ARROW / RIGHT_ARROW' to rotate by 1 deg`;e.fill("#000"),e.noStroke(),e.textSize(20),e.textWrap(e.WORD),e.textAlign(e.CENTER),e.text(i,o/2-250,50,500)}function T(i){o=i.width,r=i.height,c=o/2-t/2,u=r/2-t/2,e=i,O()}function V(){e.background("#8e44ad"),C(),W(),S()}function E(){R=e.mouseX,_=e.mouseY;for(const i in l){let a=String(8-Number(i));if(l.hasOwnProperty(a)&&q(l[a].points,[R,_])){h=l[a].id;break}}}function X(){h=null}function Y(){h&&(e.keyCode===e.LEFT_ARROW?l[h].updateAngle(!1):e.keyCode===e.RIGHT_ARROW&&l[h].updateAngle(!0))}return(i,a)=>(M(),G("div",J,[H(B,{setup:T,draw:V,"mouse-pressed":E,"mouse-released":X,"key-pressed":Y})]))}});export{v as default};
