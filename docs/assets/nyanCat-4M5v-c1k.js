import{d as q,r as k,j as A,H as F,V as r,C as H,e as M,f as X,o as j}from"./index-CqfaNC88.js";import{a as D}from"./simplex-noise-BkggsaiG.js";import{c as G,p as U}from"./canvas-Bae2WlW-.js";const h=20,T=30,Y=40,Z=q({__name:"nyanCat",setup(J){const I=D(),{floor:L,random:u}=Math,d=k(),f=k();let R=0,w;return A(async()=>{const{width:c,height:p}=d.value.getBoundingClientRect();f.value.width=c,f.value.height=p;const e=f.value.getContext("2d"),{stats:z}=F(d.value),o=new r(c/2,p/2);f.value.addEventListener("mousemove",n=>{const{clientX:s,clientY:t}=n;o.x=s,o.y=t});const B=105/68,x=h*9,v=x*B;class C{constructor(){this.size=10,this.type=0,this.isLive=!0,this.lastTime=0,this.interval=.1,this.pos=new r(u()*c+c,u()*p),this.type=L(u()*4)}update(s){s-this.lastTime>this.interval&&(this.type=(this.type+1)%4,this.lastTime=s),this.pos.x-=10,this.pos.x<-10&&(this.isLive=!1)}draw(){const s=this.pos,t=this.size;e.fillStyle="#fff",this.type===0&&e.fillRect(this.pos.x,this.pos.y,this.size,this.size),this.type===1&&(e.fillRect(s.x,s.y,t,t),e.fillRect(s.x-t,s.y,t,t),e.fillRect(s.x+t,s.y,t,t),e.fillRect(s.x,s.y-t,t,t),e.fillRect(s.x,s.y+t,t,t)),this.type===2&&(e.fillRect(s.x,s.y,t,t),e.fillRect(s.x-t,s.y,t,t),e.fillRect(s.x-2*t,s.y,t,t),e.fillRect(s.x+t,s.y,t,t),e.fillRect(s.x+2*t,s.y,t,t),e.fillRect(s.x,s.y-t,t,t),e.fillRect(s.x,s.y-2*t,t,t),e.fillRect(s.x,s.y+t,t,t),e.fillRect(s.x,s.y+2*t,t,t)),this.type===3&&(e.fillRect(s.x-1.5*t,s.y-1.5*t,t,t),e.fillRect(s.x+1.5*t,s.y+1.5*t,t,t),e.fillRect(s.x+1.5*t,s.y-1.5*t,t,t),e.fillRect(s.x-1.5*t,s.y+1.5*t,t,t),e.fillRect(s.x-2*t,s.y,t,t),e.fillRect(s.x+2*t,s.y,t,t),e.fillRect(s.x,s.y-2*t,t,t),e.fillRect(s.x,s.y+2*t,t,t))}}class E{constructor(s){this.points=[],this.color="#fff",this.color=s}draw(){e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y);for(let l=1;l<this.points.length-1;l+=1){const m=this.points[l],W=this.points[l+1],b=new r().copy(m).add(W).multiplyScalar(.5);e.quadraticCurveTo(m.x,m.y,b.x,b.y)}const s=this.points[this.points.length-1];e.lineTo(s.x,s.y);const t=this.points[0],i=this.points[this.points.length-1],a=e.createLinearGradient(t.x,t.y,i.x,i.y);a.addColorStop(0,"transparent"),a.addColorStop(.5,this.color),a.addColorStop(1,this.color),e.strokeStyle=a,e.stroke()}}class N{constructor(s){this.points=[],this.curves=[],this.noiseXRatio=1,this.colors=["#e12523","#dc8d30","#deeb44","#01eb3e","#138ee9","#7127ee"],this.catCanvas=s;for(let t=0;t<this.colors.length;t+=1){const i=new E(this.colors[t]);this.curves.push(i)}}updateCurvePoints(){this.curves.forEach((s,t,i)=>{s.points=this.points.map(l=>new r(l.x,l.y+(t-i.length/2)*h+h/2));const a=new r(o.x,o.y+(t-i.length/2)*h+h/2);s.points.push(a)})}update(s){this.points.length=0;const t=o.y-T;for(let i=-40;i<o.x-v/2;i+=Y){const a=t+I(i*.01+s*2,0)*T*2;this.points.push(new r(i,a))}this.updateCurvePoints()}draw(){this.curves.forEach(s=>s.draw()),e.drawImage(this.catCanvas,o.x-v/2,o.y-x/2)}}const{canvas:P,timer:V}=await G({w:v,h:x},U,6),g=new N(P);w=V;const S=10,y=[];for(let n=0;n<S;n++)y.push(new C);function _(){const n=performance.now()/1e3;e.fillStyle="#74b9ff",e.fillRect(0,0,c,p),e.lineWidth=h,g.update(n),g.draw();let s=0;for(;s<S;){const t=y[s];t.update(n),t.isLive?(t.draw(),s++):(y.splice(s,1),y.push(new C))}z.update(),R=requestAnimationFrame(_)}_()}),H(()=>{cancelAnimationFrame(R),clearInterval(w)}),(c,p)=>(j(),M("div",{ref_key:"con",ref:d,class:"w-full h-full"},[X("canvas",{ref_key:"canvas",ref:f,class:"block w-full h-full"},null,512)],512))}});export{Z as default};
