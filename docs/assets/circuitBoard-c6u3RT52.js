var T=Object.defineProperty;var F=(v,n,r)=>n in v?T(v,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):v[n]=r;var d=(v,n,r)=>(F(v,typeof n!="symbol"?n+"":n,r),r);import{d as R,r as z,h as W,o as B,b as E}from"./index-7fEuWlIe.js";const D=R({__name:"circuitBoard",setup(v){const{floor:n,random:r}=Math,M=z(),w=z(),c={size:10,wireMaxLen:40,stroke:"#ff9f43",fill:"#b2bec3",blank:"#10ac84",straightness:2};return W(()=>{const{width:k,height:A}=M.value.getBoundingClientRect();w.value.setAttribute("width",`${k}`),w.value.setAttribute("height",`${A}`);const _=n(A/c.size),m=n(k/c.size);let C=n(_*m);const p=[],h={},N=[],L=[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]];class S{constructor(t,s){d(this,"x",0);d(this,"y",0);d(this,"available",!0);d(this,"dirInd",n(r()*L.length));this.x=t,this.y=s}}class O{constructor(t){d(this,"cells",[]);t.available=!1,this.cells.push(t),C-=1}validNoCrossOver(t,s){var l,b,e,o,g,a,x,y;if([0,2,4,6].includes(s))return!0;if(s===1){const u=((l=h[`${t.x},${t.y-1}`])==null?void 0:l.available)??!0,i=((b=h[`${t.x+1},${t.y}`])==null?void 0:b.available)??!0;if(u&&i)return!0}if(s===3){const u=((e=h[`${t.x+1},${t.y}`])==null?void 0:e.available)??!0,i=((o=h[`${t.x},${t.y+1}`])==null?void 0:o.available)??!0;if(u&&i)return!0}if(s===5){const u=((g=h[`${t.x-1},${t.y}`])==null?void 0:g.available)??!0,i=((a=h[`${t.x},${t.y+1}`])==null?void 0:a.available)??!0;if(u&&i)return!0}if(s===7){const u=((x=h[`${t.x-1},${t.y}`])==null?void 0:x.available)??!0,i=((y=h[`${t.x},${t.y-1}`])==null?void 0:y.available)??!0;if(u&&i)return!0}return!1}generate(){for(;this.cells.length<c.wireMaxLen;){const t=this.cells[this.cells.length-1],s=r()<.5?[0,1,-1]:[0,-1,1];for(;s.length>0;){let l=t.dirInd+s.splice(n(r()**c.straightness*s.length),1)[0];l=l<0?8+l:l%8;const b=L[l],e=t.x+b[0],o=t.y+b[1],g=o*m+e,a=g>=0&&g<p.length?p[g]:!1;if(!(e<0||e>=m||o<0||o>=_||!a||!a.available||!this.validNoCrossOver(t,l))){a.available=!1,a.dirInd=l,C-=1,this.cells.push(a);break}}if(s.length===0)break}}draw(){var x,y,u;const t=document.createElementNS("http://www.w3.org/2000/svg","path"),s=document.createElementNS("http://www.w3.org/2000/svg","circle"),l=document.createElementNS("http://www.w3.org/2000/svg","circle");let b="";const e=c.size,o=r()*(e/6)+e/6;s.setAttribute("r",`${o}`),l.setAttribute("r",`${o}`),s.setAttribute("stroke","#fff"),l.setAttribute("stroke","#fff");const g=r()>.5;s.setAttribute("fill",g?c.fill:c.blank),l.setAttribute("fill",g?c.fill:c.blank);for(let i=0;i<this.cells.length;i+=1){const $=this.cells[i];i===0&&(b+=`M ${$.x*e+e/2} ${$.y*e+e/2}`,s.setAttribute("cx",`${$.x*e+e/2}`),s.setAttribute("cy",`${$.y*e+e/2}`)),i<this.cells.length&&(b+=` L ${$.x*e+e/2} ${$.y*e+e/2}`),i===this.cells.length-1&&(l.setAttribute("cx",`${$.x*e+e/2}`),l.setAttribute("cy",`${$.y*e+e/2}`))}t.setAttribute("d",b),t.setAttribute("fill","none"),t.setAttribute("stroke",c.stroke),t.setAttribute("stroke-width",`${o*2}`);const a=t.getTotalLength();t.style.cssText=`--len: ${a}; --len-1:${-a}; --len-3:${-3*a}`,t.classList.add(r()>.5?"animated-path-once":"animated-path-repeat"),(x=w.value)==null||x.append(t),(y=w.value)==null||y.append(s),(u=w.value)==null||u.append(l)}}for(let f=0;f<_;f+=1)for(let t=0;t<m;t+=1){const s=new S(t,f);p.push(s),h[`${t},${f}`]=s}for(;N.length<C;){const f=p[n(r()*p.length)];if(!f.available)continue;const t=new O(f);N.push(t),t.generate(),t.draw()}}),(k,A)=>(B(),E("div",{ref_key:"con",ref:M,class:"w-full h-full bg-#10ac84"},[(B(),E("svg",{ref_key:"svgCon",ref:w,class:"block",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},null,512))],512))}});export{D as default};
